<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>National Timing Windows Dataset - 3&nbsp; Data Sources Overview</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 1em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./3_integration.html" rel="next">
<link href="./1_research_compendium.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./2_data.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Sources Overview</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">National Timing Windows Dataset</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Project overview</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_research_compendium.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Research compendium</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Sources Overview</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3_integration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data integration</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4_national_dataset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">National Timing Windows Dataset</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#sec-canada-outline" id="toc-sec-canada-outline" class="nav-link active" data-scroll-target="#sec-canada-outline"><span class="header-section-number">3.1</span> Canadian Outline</a></li>
  <li><a href="#sec-freshwater-fish" id="toc-sec-freshwater-fish" class="nav-link" data-scroll-target="#sec-freshwater-fish"><span class="header-section-number">3.2</span> Canadian Freshwater Fish Species</a></li>
  <li><a href="#sec-canadian-hydrology" id="toc-sec-canadian-hydrology" class="nav-link" data-scroll-target="#sec-canadian-hydrology"><span class="header-section-number">3.3</span> Canadian Hydrological Features</a></li>
  <li><a href="#sec-freshwater-fish-occurrences" id="toc-sec-freshwater-fish-occurrences" class="nav-link" data-scroll-target="#sec-freshwater-fish-occurrences"><span class="header-section-number">3.4</span> Freshwater Fish Species Occurrences</a></li>
  <li><a href="#sec-gbif-species-occurrences" id="toc-sec-gbif-species-occurrences" class="nav-link" data-scroll-target="#sec-gbif-species-occurrences"><span class="header-section-number">3.5</span> GBIF Species Occurrences</a></li>
  <li><a href="#sec-national-hydro-network" id="toc-sec-national-hydro-network" class="nav-link" data-scroll-target="#sec-national-hydro-network"><span class="header-section-number">3.6</span> National Hydro Network</a></li>
  <li><a href="#sec-ontario_fishes" id="toc-sec-ontario_fishes" class="nav-link" data-scroll-target="#sec-ontario_fishes"><span class="header-section-number">3.7</span> Ontario Freshwater Fishes Life History Database</a></li>
  <li><a href="#sec-fishpass" id="toc-sec-fishpass" class="nav-link" data-scroll-target="#sec-fishpass"><span class="header-section-number">3.8</span> FishPass Database</a></li>
  <li><a href="#sec-nafmfd" id="toc-sec-nafmfd" class="nav-link" data-scroll-target="#sec-nafmfd"><span class="header-section-number">3.9</span> North American Freshwater Migratory Fish Database (NAFMFD)</a></li>
  <li><a href="#sec-roberge" id="toc-sec-roberge" class="nav-link" data-scroll-target="#sec-roberge"><span class="header-section-number">3.10</span> Roberge et al.&nbsp;(2002)</a></li>
  <li><a href="#sec-dahlke" id="toc-sec-dahlke" class="nav-link" data-scroll-target="#sec-dahlke"><span class="header-section-number">3.11</span> Dahlke et al.&nbsp;(2020)</a></li>
  <li><a href="#sec-fishbase" id="toc-sec-fishbase" class="nav-link" data-scroll-target="#sec-fishbase"><span class="header-section-number">3.12</span> FishBase</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">3.13</span> References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Sources Overview</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="sec-canada-outline" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="sec-canada-outline"><span class="header-section-number">3.1</span> Canadian Outline</h2>
<section id="source-and-description" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="source-and-description"><span class="header-section-number">3.1.1</span> Source and Description</h3>
<p>The dataset, titled <strong>Canada Outline</strong>, was generated to create a simplified polygon of Canada’s national boundaries. This dataset was produced using the <a href="https://gadm.org">GADM</a> Level 1 administrative boundary data for Canada, with the geometry simplified for efficient large-scale spatial analysis <span class="citation" data-cites="gadm2023">(<a href="#ref-gadm2023" role="doc-biblioref">Global Administrative Areas, 2023</a>)</span>. The resulting GeoPackage file represents Canada and its provinces/territories with reduced geometric complexity. The dataset is suitable for mapping and spatial analysis tasks requiring simplified boundaries.</p>
</section>
<section id="processing-steps" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="processing-steps"><span class="header-section-number">3.1.2</span> Processing Steps</h3>
<p>The processed data was generated using the <code>prc_canada_outline</code> script. The following steps were undertaken:</p>
<ol type="1">
<li><strong>Data Acquisition</strong>:
<ul>
<li>GADM Level 1 administrative boundary data for Canada was retrieved using the <code>geodata::gadm</code> function.</li>
</ul></li>
<li><strong>Geometry Simplification</strong>:
<ul>
<li>Simplified the polygon geometry to reduce data complexity using the <code>terra::simplifyGeom</code> function with a tolerance of 0.1.</li>
</ul></li>
<li><strong>Output Generation</strong>:
<ul>
<li>The simplified boundary dataset was saved as <code>can_1_simplified.gpkg</code> in GeoPackage format.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="processed-data-structure"><span class="header-section-number">3.1.3</span> Processed Data Structure</h3>
<p>The structure of the simplified dataset is as follows:</p>
<div class="cell">
<div id="tbl-canada-outline" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-canada-outline-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.1: Structure of the simplified Canada outline dataset
</figcaption>
<div aria-describedby="tbl-canada-outline-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 83%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column_Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">gid_1</td>
<td style="text-align: left;">Unique identifier for the first administrative level.</td>
</tr>
<tr class="even">
<td style="text-align: left;">gid_0</td>
<td style="text-align: left;">Country code for Canada.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">country</td>
<td style="text-align: left;">Name of the country (Canada).</td>
</tr>
<tr class="even">
<td style="text-align: left;">name_1</td>
<td style="text-align: left;">Name of the first administrative level (Province/Territory).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">varname_1</td>
<td style="text-align: left;">Alternative or variant names for the region.</td>
</tr>
<tr class="even">
<td style="text-align: left;">nl_name_1</td>
<td style="text-align: left;">Native language names for the region.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">type_1</td>
<td style="text-align: left;">Type of administrative unit (Province/Territory).</td>
</tr>
<tr class="even">
<td style="text-align: left;">engtype_1</td>
<td style="text-align: left;">English type name for the administrative unit.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cc_1</td>
<td style="text-align: left;">Internal code for the administrative region.</td>
</tr>
<tr class="even">
<td style="text-align: left;">hasc_1</td>
<td style="text-align: left;">Hierarchical administrative subdivision code.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">iso_1</td>
<td style="text-align: left;">ISO code for the administrative region.</td>
</tr>
<tr class="even">
<td style="text-align: left;">geom</td>
<td style="text-align: left;">Simplified polygon geometry for the region.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-freshwater-fish" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="sec-freshwater-fish"><span class="header-section-number">3.2</span> Canadian Freshwater Fish Species</h2>
<section id="source-and-description-1" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="source-and-description-1"><span class="header-section-number">3.2.1</span> Source and Description</h3>
<p>The dataset, titled <strong>FishBase Freshwater Species Checklist</strong>, was harvested from <a href="https://www.fishbase.se/">FishBase</a> <span class="citation" data-cites="fishbase2024">(<a href="#ref-fishbase2024" role="doc-biblioref">Froese, R. and Pauly, D., 2024</a>)</span>. This dataset provides information on freshwater fish species found across Canada. It includes essential taxonomic and ecological details, such as species name, vernacular name, family, order, and occurrence status. Additional datasets retrieved from FishBase include species status (e.g., threat categories from the <a href="https://www.iucnredlist.org/">IUCN Red List of Threatened Species</a>), and whether the species is classified as game or commercial. The source data consists of HTML tables retrieved through web scraping and transformed into a structured format for analysis.</p>
</section>
<section id="processing-steps-1" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="processing-steps-1"><span class="header-section-number">3.2.2</span> Processing Steps</h3>
<p>The harvested raw data was processed using the <code>prc_freshwater_fish_canada</code> script. The following steps were performed:</p>
<ol type="1">
<li><strong>Data Cleaning</strong>:
<ul>
<li>Column names in all input files were standardized using the <code>janitor::clean_names</code> function.</li>
<li>Unnecessary columns, such as <code>name_in_country</code>, were removed.</li>
</ul></li>
<li><strong>Field Selection and Renaming</strong>:
<ul>
<li>The <code>fish_base_name</code> column was renamed to <code>vernacular</code> for clarity.</li>
</ul></li>
<li><strong>Integration</strong>:
<ul>
<li>Species occurrence data was joined with additional tables for status, game species, and commercial species using the <code>species</code> column as a key.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>A unique <code>species_id</code> was generated for each species record.</li>
</ul></li>
<li><strong>Data Export</strong>:
<ul>
<li>The fully integrated and processed dataset was saved as <code>freshwater_fish_species_canada.csv</code>.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-1" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="processed-data-structure-1"><span class="header-section-number">3.2.3</span> Processed Data Structure</h3>
<p>The processed dataset retains the following structure:</p>
<div class="cell">
<div id="tbl-freshwater-fish-extended" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-freshwater-fish-extended-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.2: Structure of the processed freshwater fish species dataset for Canada
</figcaption>
<div aria-describedby="tbl-freshwater-fish-extended-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column_Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">species_id</td>
<td style="text-align: left;">Unique identifier for each fish species entry.</td>
</tr>
<tr class="even">
<td style="text-align: left;">species</td>
<td style="text-align: left;">Scientific name of the fish species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vernacular</td>
<td style="text-align: left;">Common name of the fish species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">order</td>
<td style="text-align: left;">Taxonomic order to which the species belongs.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">family</td>
<td style="text-align: left;">Taxonomic family to which the species belongs.</td>
</tr>
<tr class="even">
<td style="text-align: left;">occurrence</td>
<td style="text-align: left;">Occurrence status of the species in Canada (e.g., native).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">threat_category</td>
<td style="text-align: left;">Threat category assigned to the species, if applicable (e.g., Vulnerable (VU), Endangered (EN)).</td>
</tr>
<tr class="even">
<td style="text-align: left;">game</td>
<td style="text-align: left;">Indicator of whether the species is classified as a game species (1 = yes, NA = no).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">commercial</td>
<td style="text-align: left;">Indicator of whether the species is classified as a commercial species (1 = yes, NA = no).</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-canadian-hydrology" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="sec-canadian-hydrology"><span class="header-section-number">3.3</span> Canadian Hydrological Features</h2>
<section id="source-and-description-2" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="source-and-description-2"><span class="header-section-number">3.3.1</span> Source and Description</h3>
<p>The dataset, titled <strong>Atlas of Canada National Scale Data 1:1,000,000 - Waterbodies &amp; Rivers</strong>, was harvested from <a href="https://open.canada.ca/data/en/dataset/e9931fc7-034c-52ad-91c5-6c64d4ba0065">Natural Resources Canada</a> <span class="citation" data-cites="nrcan2022a nrcan2022b">(<a href="#ref-nrcan2022a" role="doc-biblioref">Canada, 2022b</a>, <a href="#ref-nrcan2022b" role="doc-biblioref">2022a</a>)</span>. This comprehensive GIS dataset includes spatial and tabular data representing Canada’s hydrological features. It consists of waterbodies and river datasets compiled for large-scale mapping at a 1:1,000,000 scale. The processed dataset provides geospatial layers of lakes and rivers, including both their polygonal representations and sampled points for further spatial analyses.</p>
</section>
<section id="processing-steps-2" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="processing-steps-2"><span class="header-section-number">3.3.2</span> Processing Steps</h3>
<p>The harvested raw data was processed using the <code>prc_atlas_of_canada_hydrology</code> script. The following steps were performed:</p>
<ol type="1">
<li><strong>Unzipping</strong>: The compressed GDB files were extracted to a temporary directory for processing.</li>
<li><strong>Lake Processing</strong>:
<ul>
<li>Loaded the “AC_1M_Waterbodies” layer using the <code>sf::st_read</code> function.</li>
<li>Calculated the area and perimeter of each lake using <code>sf::st_area</code> and <code>lwgeom::st_perimeter_lwgeom</code>.</li>
<li>Filter lakes to keep only lakes with area &gt; 5 <span class="math inline">\(km^2\)</span>.</li>
<li>Generated a unique <code>waterbody_id</code> for each lake and classified it as type <code>lake</code>.</li>
<li>Retained relevant columns: <code>waterbody_id</code>, <code>wb_type</code>, <code>name</code>, <code>name_fr</code>, <code>area</code>, and <code>perimeter</code>.</li>
<li>Transformed the data to CRS 4326 and exported it as <code>lakes_polygons.gpkg</code>.</li>
<li>Generated centroids for each lake and exported the point layer as <code>lakes_points.gpkg</code>.</li>
</ul></li>
<li><strong>River Processing</strong>:
<ul>
<li>Loaded the “AC_1M_Rivers_dense” layer using the <code>sf::st_read</code> function.</li>
<li>Calculated the length of each river segment using <code>sf::st_length</code>.</li>
<li>Filter lakes to keep only lakes with length &gt; 10 km.</li>
<li>Generated a unique <code>waterbody_id</code> for each river and classified it as type <code>river</code>.</li>
<li>Retained relevant columns: <code>waterbody_id</code>, <code>wb_type</code>, <code>name</code>, <code>name_fr</code>, and <code>length</code>.</li>
<li>Transformed the data to CRS 4326 and exported it as <code>rivers_lines.gpkg</code>.</li>
<li>Sampled points along each river segment at the mid-point of each rivers, cast the lines to points, and exported as <code>rivers_points.gpkg</code>.</li>
</ul></li>
<li><strong>Cleanup</strong>: Temporary files created during processing were deleted.</li>
</ol>
</section>
<section id="processed-data-structure-2" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="processed-data-structure-2"><span class="header-section-number">3.3.3</span> Processed Data Structure</h3>
<p>The structure of the processed lake polygon dataset is as follows:</p>
<div class="cell">
<div id="tbl-lakes-polygons" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-lakes-polygons-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.3: Structure of the processed lake polygon dataset for Canada
</figcaption>
<div aria-describedby="tbl-lakes-polygons-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Column_Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">waterbody_id</td>
<td style="text-align: left;">Unique identifier for each lake feature.</td>
</tr>
<tr class="even">
<td style="text-align: left;">wb_type</td>
<td style="text-align: left;">Type of waterbody, always ‘lake’ for this dataset.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">name</td>
<td style="text-align: left;">Name of the lake in English.</td>
</tr>
<tr class="even">
<td style="text-align: left;">name_fr</td>
<td style="text-align: left;">Name of the lake in French.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">area</td>
<td style="text-align: left;">Surface area of the lake in square kilometers.</td>
</tr>
<tr class="even">
<td style="text-align: left;">perimeter</td>
<td style="text-align: left;">Perimeter of the lake in kilometers.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>The structure of the processed lake point dataset is as follows:</p>
<div class="cell">
<div id="tbl-lakes-points" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-lakes-points-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.4: Structure of the processed lake point dataset for Canada
</figcaption>
<div aria-describedby="tbl-lakes-points-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 83%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column_Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">waterbody_id</td>
<td style="text-align: left;">Unique identifier for each lake feature.</td>
</tr>
<tr class="even">
<td style="text-align: left;">geom</td>
<td style="text-align: left;">Centroid geometry of the lake in geographic coordinates (CRS 4326).</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>The structure of the processed river line dataset is as follows:</p>
<div class="cell">
<div id="tbl-rivers-lines" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-rivers-lines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.5: Structure of the processed river line dataset for Canada
</figcaption>
<div aria-describedby="tbl-rivers-lines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Column_Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">waterbody_id</td>
<td style="text-align: left;">Unique identifier for each river segment.</td>
</tr>
<tr class="even">
<td style="text-align: left;">wb_type</td>
<td style="text-align: left;">Type of waterbody, always ‘river’ for this dataset.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">name</td>
<td style="text-align: left;">Name of the river in English.</td>
</tr>
<tr class="even">
<td style="text-align: left;">name_fr</td>
<td style="text-align: left;">Name of the river in French.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">length</td>
<td style="text-align: left;">Length of the river segment in kilometers.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>The structure of the processed river point dataset is as follows:</p>
<div class="cell">
<div id="tbl-rivers-points" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-rivers-points-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.6: Structure of the processed river point dataset for Canada
</figcaption>
<div aria-describedby="tbl-rivers-points-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Column_Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">waterbody_id</td>
<td style="text-align: left;">Unique identifier for each river segment.</td>
</tr>
<tr class="even">
<td style="text-align: left;">geom</td>
<td style="text-align: left;">Sampled point geometry at the mid-point of the river.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-freshwater-fish-occurrences" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="sec-freshwater-fish-occurrences"><span class="header-section-number">3.4</span> Freshwater Fish Species Occurrences</h2>
<section id="source-and-description-3" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="source-and-description-3"><span class="header-section-number">3.4.1</span> Source and Description</h3>
<p>The dataset, titled <strong>Global Freshwater Fish Species Occurrences Database</strong>, was retrieved from <a href="https://figshare.com/collections/A_global_database_on_freshwater_fish_species_occurrences_in_drainage_basins/3739145">Figshare</a> <span class="citation" data-cites="figshare2025">(<a href="#ref-figshare2025" role="doc-biblioref">Tedesco et al., 2017a</a>)</span>. This comprehensive dataset compiles freshwater fish species occurrences aggregated at the drainage basin level. The data is associated with the data paper by <span class="citation" data-cites="tedesco2017">Tedesco et al. (<a href="#ref-tedesco2017" role="doc-biblioref">2017b</a>)</span> and is designed for analyzing global freshwater biodiversity patterns.</p>
<p>The dataset includes both spatial data (drainage basins) and tabular data (species occurrences). The drainage basin data covers 3,119 polygons worldwide, while the occurrence table provides over 110,000 records of species distributions across basins. The data has been validated using established taxonomic references such as FishBase.</p>
</section>
<section id="processing-steps-3" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="processing-steps-3"><span class="header-section-number">3.4.2</span> Processing Steps</h3>
<p>The harvested data was processed using the <code>prc_freshwater_fish_occurrences</code> script. The following steps were performed:</p>
<ol type="1">
<li><strong>Data Extraction</strong>:
<ul>
<li>The compressed dataset (<code>freshwater_fish_occurrences.zip</code>) was unzipped into a temporary directory.</li>
</ul></li>
<li><strong>Drainage Basin Data Processing</strong>:
<ul>
<li>The shapefile <code>Basin042017_3119.shp</code> was loaded using the <code>sf::st_read</code> function.</li>
<li>Column names were cleaned and renamed to remove unnecessary prefixes using <code>janitor::clean_names</code> and <code>dplyr::rename_with</code>.</li>
<li>The cleaned data was exported as <code>bassins.gpkg</code> in GeoPackage format.</li>
</ul></li>
<li><strong>Species Occurrence Data Processing</strong>:
<ul>
<li>The <code>Occurrence_Table.csv</code> file was loaded using the <code>vroom::vroom</code> function.</li>
<li>Column names were cleaned and renamed similarly to the drainage basin data.</li>
<li>Species names in the <code>species_name_in_source</code> and <code>fishbase_valid_species_name</code> columns were updated to replace periods (<code>.</code>) with spaces.</li>
<li>The processed data was exported as <code>occurrences.csv</code>.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-3" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="processed-data-structure-3"><span class="header-section-number">3.4.3</span> Processed Data Structure</h3>
<p>The structure of the processed drainage basin dataset (<code>bassins.gpkg</code>) is as follows:</p>
<div class="cell">
<div id="tbl-bassins" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-bassins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.7: Structure of the processed drainage basin dataset
</figcaption>
<div aria-describedby="tbl-bassins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 83%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column_Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">basin_name</td>
<td style="text-align: left;">Name of the drainage basin.</td>
</tr>
<tr class="even">
<td style="text-align: left;">country</td>
<td style="text-align: left;">Country where the basin is located.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ecoregion</td>
<td style="text-align: left;">Ecoregion associated with the basin.</td>
</tr>
<tr class="even">
<td style="text-align: left;">endorheic</td>
<td style="text-align: left;">Indicator of whether the basin is endorheic (closed basin).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">out_longit</td>
<td style="text-align: left;">Longitude of the basin outlet.</td>
</tr>
<tr class="even">
<td style="text-align: left;">out_latit</td>
<td style="text-align: left;">Latitude of the basin outlet.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">med_longit</td>
<td style="text-align: left;">Median longitude of the basin.</td>
</tr>
<tr class="even">
<td style="text-align: left;">med_latit</td>
<td style="text-align: left;">Median latitude of the basin.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">surf_area</td>
<td style="text-align: left;">Surface area of the basin in square kilometers.</td>
</tr>
<tr class="even">
<td style="text-align: left;">geometry</td>
<td style="text-align: left;">Polygon geometry of the basin.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>The structure of the processed species occurrence dataset (<code>occurrences.csv</code>) is as follows:</p>
<div class="cell">
<div id="tbl-occurrences" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-occurrences-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.8: Structure of the processed species occurrence dataset
</figcaption>
<div aria-describedby="tbl-occurrences-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 29%">
<col style="width: 70%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column_Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">basin_name</td>
<td style="text-align: left;">Name of the drainage basin.</td>
</tr>
<tr class="even">
<td style="text-align: left;">species_name_in_source</td>
<td style="text-align: left;">Species name as recorded in the source.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">native_exotic_status</td>
<td style="text-align: left;">Status of the species in the basin (native or exotic).</td>
</tr>
<tr class="even">
<td style="text-align: left;">tsn_itis_code</td>
<td style="text-align: left;">Taxonomic Serial Number (TSN) from ITIS.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fishbase_species_code</td>
<td style="text-align: left;">Species code from FishBase.</td>
</tr>
<tr class="even">
<td style="text-align: left;">fishbase_valid_species_name</td>
<td style="text-align: left;">Valid species name from FishBase.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">occurrence_status</td>
<td style="text-align: left;">Occurrence status of the species in the basin (valid or invalid).</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-gbif-species-occurrences" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="sec-gbif-species-occurrences"><span class="header-section-number">3.5</span> GBIF Species Occurrences</h2>
<section id="source-and-description-4" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="source-and-description-4"><span class="header-section-number">3.5.1</span> Source and Description</h3>
<p>The dataset, titled <strong>GBIF Occurrence Data</strong>, was retrieved from the <a href="https://www.gbif.org/">Global Biodiversity Information Facility (GBIF)</a> <span class="citation" data-cites="gbif2025">(<a href="#ref-gbif2025" role="doc-biblioref">Global Biodiversity Information Facility, 2025</a>)</span>. This dataset compiles species occurrence records for a specified taxonomic group and geographic region. The retrieved dataset includes spatial and tabular data for over 850,000 records of species occurrences across Canada, starting from 2000.</p>
<p>It should be noted that the processing steps described below show how the data is downloaded and processed programmatically. However, due to how GBIF manages their data request, we elected to store the downloaded data on our secure Google Cloud Storage and to retrieve them programmatically from there rather than directly on GBIF.</p>
</section>
<section id="processing-steps-4" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="processing-steps-4"><span class="header-section-number">3.5.2</span> Processing Steps</h3>
<p>The harvested data was processed using the <code>dwn_gbif</code> and <code>prc_gbif</code> scripts. The following steps were performed:</p>
<ol type="1">
<li><strong>Data Download</strong>:
<ul>
<li>A query for specified taxonomic groups and geographic boundaries was submitted to the GBIF API using the <code>rgbif</code> package.</li>
</ul></li>
<li><strong>Data Extraction</strong>:
<ul>
<li>The compressed ZIP file was extracted into a temporary directory.</li>
<li>The occurrence data was read from <code>occurrence.txt</code> using the <code>vroom::vroom</code> function.</li>
</ul></li>
<li><strong>Data Cleaning and Transformation</strong>:
<ul>
<li>Selected relevant columns: <code>species</code>, <code>year</code>, <code>month</code>, <code>day</code>, <code>eventDate</code>, <code>decimalLatitude</code>, <code>decimalLongitude</code>, and <code>lifeStage</code>.</li>
<li>Converted the cleaned data to a spatial data frame using the <code>sf::st_as_sf</code> function with geographic coordinates (CRS 4326).</li>
</ul></li>
<li><strong>Export</strong>:
<ul>
<li>The cleaned and spatially enabled dataset was exported as <code>species_occurrences_gbif.gpkg</code> in GeoPackage format.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-4" class="level3" data-number="3.5.3">
<h3 data-number="3.5.3" class="anchored" data-anchor-id="processed-data-structure-4"><span class="header-section-number">3.5.3</span> Processed Data Structure</h3>
<p>The structure of the processed dataset (<code>species_occurrences_gbif.gpkg</code>) is as follows:</p>
<div class="cell">
<div id="tbl-gbif-occurrences" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-gbif-occurrences-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.9: Structure of the processed GBIF occurrence dataset
</figcaption>
<div aria-describedby="tbl-gbif-occurrences-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column_Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">species</td>
<td style="text-align: left;">Scientific name of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">year</td>
<td style="text-align: left;">Year of the recorded occurrence.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">month</td>
<td style="text-align: left;">Month of the recorded occurrence.</td>
</tr>
<tr class="even">
<td style="text-align: left;">day</td>
<td style="text-align: left;">Day of the recorded occurrence.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">eventDate</td>
<td style="text-align: left;">Full date and time of the recorded occurrence.</td>
</tr>
<tr class="even">
<td style="text-align: left;">lifeStage</td>
<td style="text-align: left;">Life stage of the species at the time of the occurrence (if available).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">geometry</td>
<td style="text-align: left;">Point geometry of the occurrence in geographic coordinates (CRS 4326).</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-national-hydro-network" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="sec-national-hydro-network"><span class="header-section-number">3.6</span> National Hydro Network</h2>
<section id="source-and-description-5" class="level3" data-number="3.6.1">
<h3 data-number="3.6.1" class="anchored" data-anchor-id="source-and-description-5"><span class="header-section-number">3.6.1</span> Source and Description</h3>
<p>The dataset, titled <strong>National Hydro Network (NHN) GeoBase Series</strong>, was retrieved from <a href="https://open.canada.ca/data/en/dataset/a4b190fe-e090-4e6d-881e-b87956c07977">Natural Resources Canada</a> <span class="citation" data-cites="nrcan2022">(<a href="#ref-nrcan2022" role="doc-biblioref">Canada, 2022c</a>)</span>. This dataset provides a comprehensive geometric description and a set of basic attributes describing Canada’s inland surface waters. The data includes lakes, reservoirs, rivers, canals, drainage networks, and associated features.</p>
</section>
<section id="processing-steps-5" class="level3" data-number="3.6.2">
<h3 data-number="3.6.2" class="anchored" data-anchor-id="processing-steps-5"><span class="header-section-number">3.6.2</span> Processing Steps</h3>
<p>The NHN data was processed using the <code>prc_national_hydro_network</code> script. The following steps were performed:</p>
<ol type="1">
<li><strong>Data Extraction</strong>:
<ul>
<li>The compressed GeoPackage dataset (<code>rhn_nhn_decoupage.gpkg.zip</code>) was unzipped into a temporary directory.</li>
</ul></li>
<li><strong>Watershed Data Processing</strong>:
<ul>
<li>The GeoPackage file (<code>rhn_nhn_decoupage.gpkg</code>) was read using the <code>sf::st_read</code> function.</li>
<li>All geometries were cast to polygons using <code>sf::st_cast("GEOMETRYCOLLECTION")</code> and <code>sf::st_collection_extract("POLYGON")</code>.</li>
<li>The geometries were simplified using <code>sf::st_simplify(dTolerance = 100)</code> to reduce complexity while maintaining accuracy.</li>
<li>A unique <code>watershed_id</code> was generated for each feature using the <code>dplyr::mutate</code> function.</li>
<li>Only the <code>watershed_id</code> and geometry columns were retained.</li>
</ul></li>
<li><strong>Export</strong>:
<ul>
<li>The processed watershed data was exported as <code>watersheds.gpkg</code> in GeoPackage format.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-5" class="level3" data-number="3.6.3">
<h3 data-number="3.6.3" class="anchored" data-anchor-id="processed-data-structure-5"><span class="header-section-number">3.6.3</span> Processed Data Structure</h3>
<p>The structure of the processed dataset (<code>watersheds.gpkg</code>) is as follows:</p>
<div class="cell">
<div id="tbl-watersheds" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-watersheds-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.10: Structure of the processed watershed dataset
</figcaption>
<div aria-describedby="tbl-watersheds-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 15%">
<col style="width: 84%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column_Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">watershed_id</td>
<td style="text-align: left;">Unique identifier for each watershed feature.</td>
</tr>
<tr class="even">
<td style="text-align: left;">geom</td>
<td style="text-align: left;">Polygon geometry of the watershed in geographic coordinates (CRS 4326).</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-ontario_fishes" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="sec-ontario_fishes"><span class="header-section-number">3.7</span> Ontario Freshwater Fishes Life History Database</h2>
<p>The <a href="https://www.ontariofishes.ca/home.htm">Ontario Freshwater Fishes Life History Database</a> <span class="citation" data-cites="eakins2024">(<a href="#ref-eakins2024" role="doc-biblioref">Eakins, 2024</a>)</span> provides comprehensive life history information for 161 freshwater fish species in Ontario, Canada. The dataset includes 43 characteristics per species, covering taxonomic, ecological, reproductive, and habitat-related information. It also provides a bibliography of references used to compile this data.</p>
<section id="source-and-accessibility" class="level3" data-number="3.7.1">
<h3 data-number="3.7.1" class="anchored" data-anchor-id="source-and-accessibility"><span class="header-section-number">3.7.1</span> Source and Accessibility</h3>
<ul>
<li><strong>Source</strong>: Ontario Freshwater Fishes Life History Database</li>
<li><strong>Accessibility</strong>: Open Government Licence - Canada</li>
<li><strong>Data Type</strong>: HTML Scraped Dataset</li>
<li><strong>Coverage</strong>: Freshwater systems in Ontario, Canada</li>
<li><strong>Geographic Coverage</strong>: Ontario (Bounding Box: -95.1539, 41.6770, -74.3435, 56.8595)</li>
<li><strong>Temporal Coverage</strong>: 2024</li>
<li><strong>Processing Script</strong>: <code>dwn_ontario_freshwater_fishes_life_history.R</code></li>
<li><strong>Output Files</strong>: <code>ontario_fishes_characteristics.csv</code>, <code>ontario_fishes_references.csv</code></li>
</ul>
</section>
<section id="processing-steps-6" class="level3" data-number="3.7.2">
<h3 data-number="3.7.2" class="anchored" data-anchor-id="processing-steps-6"><span class="header-section-number">3.7.2</span> Processing Steps</h3>
<p>Data was harvested from the website by scraping individual fish detail pages for 161 species. The harvesting script used the <code>rvest</code> package in R to extract structured data for each species, including:</p>
<ol type="1">
<li><strong>Characteristics Extraction</strong>: Scraped 43 life history attributes such as family, common name, habitat preference, spawning season, thermal regime, and abundance.</li>
<li><strong>References Compilation</strong>: Extracted all bibliographic references associated with each species.</li>
<li><strong>Data Cleaning</strong>: Cleaned and pivoted the raw data into a tidy format using <code>tidyr::pivot_wider()</code> and <code>janitor::clean_names()</code>.</li>
<li><strong>Export</strong>: Saved the processed data into two CSV files:
<ul>
<li><code>ontario_fishes_characteristics.csv</code>: A structured table of life history characteristics.</li>
<li><code>ontario_fishes_references.csv</code>: A table of species-referenced bibliographies.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-6" class="level3" data-number="3.7.3">
<h3 data-number="3.7.3" class="anchored" data-anchor-id="processed-data-structure-6"><span class="header-section-number">3.7.3</span> Processed Data Structure</h3>
<p>The structure of the processed data includes the following key variables:</p>
<div class="cell">
<div id="tbl-ontario-fishes-structure" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-ontario-fishes-structure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.11: Structure of the Ontario Fishes Characteristics Table
</figcaption>
<div aria-describedby="tbl-ontario-fishes-structure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 24%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">species_name</td>
<td style="text-align: left;">Scientific name of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">family</td>
<td style="text-align: left;">Taxonomic family, including common name.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">species</td>
<td style="text-align: left;">Species name, including genus.</td>
</tr>
<tr class="even">
<td style="text-align: left;">taxonomic_authority</td>
<td style="text-align: left;">Author of the taxonomic classification.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">common_name_s</td>
<td style="text-align: left;">Common name in English.</td>
</tr>
<tr class="even">
<td style="text-align: left;">french_name</td>
<td style="text-align: left;">Common name in French.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ontario_origin</td>
<td style="text-align: left;">Origin status in Ontario (e.g., native, introduced).</td>
</tr>
<tr class="even">
<td style="text-align: left;">general_abundance</td>
<td style="text-align: left;">General abundance in freshwater systems.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">thermal_regime</td>
<td style="text-align: left;">Thermal regime preference (coldwater, coolwater, warmwater).</td>
</tr>
<tr class="even">
<td style="text-align: left;">habitat_preference</td>
<td style="text-align: left;">Preferred habitats for the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">spawning_season</td>
<td style="text-align: left;">Season of spawning activity.</td>
</tr>
<tr class="even">
<td style="text-align: left;">fecundity</td>
<td style="text-align: left;">Number of eggs produced by the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">adult_length_cm</td>
<td style="text-align: left;">Length of adult individuals in centimeters.</td>
</tr>
<tr class="even">
<td style="text-align: left;">maximum_length_cm</td>
<td style="text-align: left;">Maximum recorded length of the species in centimeters.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lifespan_yrs</td>
<td style="text-align: left;">Expected lifespan in years.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<div id="tbl-ontario-fishes-references" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-ontario-fishes-references-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.12: Structure of the Ontario Fishes References Table
</figcaption>
<div aria-describedby="tbl-ontario-fishes-references-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 86%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">species</td>
<td style="text-align: left;">Scientific name of the species associated with the reference.</td>
</tr>
<tr class="even">
<td style="text-align: left;">reference</td>
<td style="text-align: left;">Reference citation for the data.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-fishpass" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="sec-fishpass"><span class="header-section-number">3.8</span> FishPass Database</h2>
<p>The <a href="https://doi.org/10.5061/dryad.fqz612jwj">FishPass Database</a> <span class="citation" data-cites="benoit2023">(<a href="#ref-benoit2023" role="doc-biblioref">Benoit et al., 2023</a>)</span> provides a comprehensive collection of biological attributes that influence fish movement and passage, with a particular focus on species from the Laurentian Great Lakes. This dataset is essential for designing selective fish passage systems that aim to balance connectivity while managing the spread of invasive species. It includes 21 biological attributes, covering phenology, morphology, physiology, and behavioral characteristics for 220 fish species. Data coverage varies across species and attributes, highlighting gaps in knowledge about behavioral traits and potential invasive species.</p>
<section id="source-and-accessibility-1" class="level3" data-number="3.8.1">
<h3 data-number="3.8.1" class="anchored" data-anchor-id="source-and-accessibility-1"><span class="header-section-number">3.8.1</span> Source and Accessibility</h3>
<ul>
<li><strong>Source</strong>: Dryad Repository</li>
<li><strong>DOI</strong>: <a href="https://doi.org/10.5061/dryad.fqz612jwj">10.5061/dryad.fqz612jwj</a></li>
<li><strong>Accessibility</strong>: CC0 Public Domain Dedication</li>
<li><strong>Data Type</strong>: Tabular CSV files</li>
<li><strong>Coverage</strong>: Laurentian Great Lakes, North America</li>
<li><strong>Processing Script</strong>: <code>prc_fishpass.R</code></li>
<li><strong>Output Files</strong>:
<ul>
<li><code>fishpass_behaviour.csv</code></li>
<li><code>fishpass_morphology.csv</code></li>
<li><code>fishpass_phenology.csv</code></li>
<li><code>fishpass_physiology.csv</code></li>
</ul></li>
</ul>
</section>
<section id="processing-steps-7" class="level3" data-number="3.8.2">
<h3 data-number="3.8.2" class="anchored" data-anchor-id="processing-steps-7"><span class="header-section-number">3.8.2</span> Processing Steps</h3>
<ol type="1">
<li><strong>Data Cleaning</strong>:
<ul>
<li>Column names were standardized using <code>janitor::clean_names()</code>.</li>
<li>Missing or malformed data were handled appropriately.</li>
</ul></li>
<li><strong>Data Structuring</strong>:
<ul>
<li>Each CSV file was parsed into tidy data tables, retaining only relevant fields.</li>
<li>Attributes such as migratory status, body morphology, spawning season, and vertical stationing were included.</li>
</ul></li>
<li><strong>Export</strong>:
<ul>
<li>Cleaned data tables were saved into separate CSV files for each attribute dimension, enabling modular analysis.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-7" class="level3" data-number="3.8.3">
<h3 data-number="3.8.3" class="anchored" data-anchor-id="processed-data-structure-7"><span class="header-section-number">3.8.3</span> Processed Data Structure</h3>
<p>The cleaned dataset is divided into four tables, each containing data for 220 species:</p>
<div class="cell">
<div id="tbl-fishpass-behaviour" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-fishpass-behaviour-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.13: Structure of the FishPass Behaviour Data Table
</figcaption>
<div aria-describedby="tbl-fishpass-behaviour-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 23%">
<col style="width: 76%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">order</td>
<td style="text-align: left;">Taxonomic order of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">family</td>
<td style="text-align: left;">Taxonomic family of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">genus</td>
<td style="text-align: left;">Genus of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">scientific_name</td>
<td style="text-align: left;">Scientific name of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">common_name</td>
<td style="text-align: left;">Common name of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">vertical_station</td>
<td style="text-align: left;">Vertical stationing behavior (e.g., demersal, pelagic).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">schooling_behaviour</td>
<td style="text-align: left;">Tendency for schooling behavior (e.g., schooling, non-schooling).</td>
</tr>
<tr class="even">
<td style="text-align: left;">reference_vs</td>
<td style="text-align: left;">Reference for vertical station data.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">reference_sb</td>
<td style="text-align: left;">Reference for schooling behavior data.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<div id="tbl-fishpass-morphology" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-fishpass-morphology-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.14: Structure of the FishPass Morphology Data Table
</figcaption>
<div aria-describedby="tbl-fishpass-morphology-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">order</td>
<td style="text-align: left;">Taxonomic order of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">family</td>
<td style="text-align: left;">Taxonomic family of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">genus</td>
<td style="text-align: left;">Genus of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">scientific_name</td>
<td style="text-align: left;">Scientific name of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">common_name</td>
<td style="text-align: left;">Common name of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">maximum_total_length_cm</td>
<td style="text-align: left;">Maximum recorded total length (cm).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">body_shape</td>
<td style="text-align: left;">Overall body shape (e.g., fusiform, elongated).</td>
</tr>
<tr class="even">
<td style="text-align: left;">aspect_ratio</td>
<td style="text-align: left;">Aspect ratio of the fins.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">eye_size_percent_hl</td>
<td style="text-align: left;">Eye size as a percentage of head length.</td>
</tr>
<tr class="even">
<td style="text-align: left;">reference_mtl</td>
<td style="text-align: left;">Reference for maximum total length data.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<div id="tbl-fishpass-phenology" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-fishpass-phenology-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.15: Structure of the FishPass Phenology Data Table
</figcaption>
<div aria-describedby="tbl-fishpass-phenology-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 29%">
<col style="width: 70%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">order</td>
<td style="text-align: left;">Taxonomic order of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">family</td>
<td style="text-align: left;">Taxonomic family of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">genus</td>
<td style="text-align: left;">Genus of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">scientific_name</td>
<td style="text-align: left;">Scientific name of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">common_name</td>
<td style="text-align: left;">Common name of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">migratory_status</td>
<td style="text-align: left;">Whether the species is migratory or non-migratory.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">spatial_scale_of_movement</td>
<td style="text-align: left;">Scale of spatial movement (e.g., diadromous, potamodromous).</td>
</tr>
<tr class="even">
<td style="text-align: left;">spawning_frequency</td>
<td style="text-align: left;">Frequency of spawning (e.g., iteroparous).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">spring_spawner</td>
<td style="text-align: left;">Indicates if the species spawns in spring (binary).</td>
</tr>
<tr class="even">
<td style="text-align: left;">reference_sf</td>
<td style="text-align: left;">Reference for spawning frequency data.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<div id="tbl-fishpass-physiology" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-fishpass-physiology-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.16: Structure of the FishPass Physiology Data Table
</figcaption>
<div aria-describedby="tbl-fishpass-physiology-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 44%">
<col style="width: 55%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">order</td>
<td style="text-align: left;">Taxonomic order of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">family</td>
<td style="text-align: left;">Taxonomic family of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">genus</td>
<td style="text-align: left;">Genus of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">scientific_name</td>
<td style="text-align: left;">Scientific name of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">common_name</td>
<td style="text-align: left;">Common name of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">climbing_ability</td>
<td style="text-align: left;">Ability to climb barriers (binary).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hearing_specialization</td>
<td style="text-align: left;">Hearing specialization (binary).</td>
</tr>
<tr class="even">
<td style="text-align: left;">trophic_level</td>
<td style="text-align: left;">Trophic level of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">presence_of_ampullary_electroreceptors</td>
<td style="text-align: left;">Presence of ampullary electroreceptors (binary).</td>
</tr>
<tr class="even">
<td style="text-align: left;">reference_ca</td>
<td style="text-align: left;">Reference for climbing ability data.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-nafmfd" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="sec-nafmfd"><span class="header-section-number">3.9</span> North American Freshwater Migratory Fish Database (NAFMFD)</h2>
<p>The <a href="https://doi.org/10.5066/P9WDLLP0">North American Freshwater Migratory Fish Database (NAFMFD)</a> <span class="citation" data-cites="dean2021 dean2022">(<a href="#ref-dean2021" role="doc-biblioref">Dean et al., 2021</a>, <a href="#ref-dean2022" role="doc-biblioref">2022</a>)</span> synthesizes comprehensive data on the migratory behavior of freshwater fishes across Canada, the United States, and Mexico. It includes information for 1,241 species spanning 79 families and 322 genera, characterizing migratory status, patterns, and behaviors.</p>
<section id="source-and-accessibility-2" class="level3" data-number="3.9.1">
<h3 data-number="3.9.1" class="anchored" data-anchor-id="source-and-accessibility-2"><span class="header-section-number">3.9.1</span> Source and Accessibility</h3>
<ul>
<li><strong>Source</strong>: U.S. Geological Survey ScienceBase-Catalog</li>
<li><strong>DOI</strong>: <a href="https://doi.org/10.5066/P9WDLLP0">10.5066/P9WDLLP0</a></li>
<li><strong>Accessibility</strong>: Public Domain</li>
<li><strong>Data Type</strong>: Excel Spreadsheet and Metadata (XML)</li>
<li><strong>Coverage</strong>: North America</li>
<li><strong>Processing Script</strong>: <code>prc_north_american_freshwater_migratory_fish_database.R</code></li>
<li><strong>Output Files</strong>:
<ul>
<li><code>north_american_freshwater_migratory_fish_database.csv</code></li>
</ul></li>
</ul>
</section>
<section id="processing-steps-8" class="level3" data-number="3.9.2">
<h3 data-number="3.9.2" class="anchored" data-anchor-id="processing-steps-8"><span class="header-section-number">3.9.2</span> Processing Steps</h3>
<p>The data was harvested from the ScienceBase-Catalog using two files: an Excel spreadsheet containing species information and a metadata XML file. The processing involved the following steps:</p>
<ol type="1">
<li><strong>Data Extraction</strong>:
<ul>
<li>The Excel file was read using the <code>readxl</code> package.</li>
<li>Column names were standardized using <code>janitor::clean_names()</code> for consistency.</li>
</ul></li>
<li><strong>Data Cleaning</strong>:
<ul>
<li>Removed unnecessary whitespace and formatted data fields for analysis.</li>
</ul></li>
<li><strong>Export</strong>:
<ul>
<li>The processed data was saved as a CSV file for ease of use in further analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-8" class="level3" data-number="3.9.3">
<h3 data-number="3.9.3" class="anchored" data-anchor-id="processed-data-structure-8"><span class="header-section-number">3.9.3</span> Processed Data Structure</h3>
<p>The final processed dataset contains 28 fields and 2,198 rows. Key variables include species taxonomy, migratory behavior, and references for data sources.</p>
<div class="cell">
<div id="tbl-nafmfd-structure" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-nafmfd-structure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.17: Structure of the NAFMFD Processed Data
</figcaption>
<div aria-describedby="tbl-nafmfd-structure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 80%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">itis_family</td>
<td style="text-align: left;">Integrated Taxonomic Information System (ITIS) identifier for the family.</td>
</tr>
<tr class="even">
<td style="text-align: left;">family_name</td>
<td style="text-align: left;">Taxonomic family name of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">scientific_name</td>
<td style="text-align: left;">Scientific name of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">common_name</td>
<td style="text-align: left;">Common name of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">migratory</td>
<td style="text-align: left;">Indicator of whether the species is migratory (1 = yes, 0 = no).</td>
</tr>
<tr class="even">
<td style="text-align: left;">anadromous</td>
<td style="text-align: left;">Indicator of anadromous migratory behavior (1 = yes, 0 = no).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">catadromous</td>
<td style="text-align: left;">Indicator of catadromous migratory behavior (1 = yes, 0 = no).</td>
</tr>
<tr class="even">
<td style="text-align: left;">potamodromous</td>
<td style="text-align: left;">Indicator of potamodromous migratory behavior (1 = yes, 0 = no).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">diadromous</td>
<td style="text-align: left;">Indicator of diadromous migratory behavior (1 = yes, 0 = no).</td>
</tr>
<tr class="even">
<td style="text-align: left;">suspected_migrant</td>
<td style="text-align: left;">Indicator of suspected migratory status (1 = yes, 0 = no).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">non_migratory</td>
<td style="text-align: left;">Indicator of non-migratory status (1 = yes, 0 = no).</td>
</tr>
<tr class="even">
<td style="text-align: left;">reference</td>
<td style="text-align: left;">Reference for data source and assignment.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-roberge" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="sec-roberge"><span class="header-section-number">3.10</span> Roberge et al.&nbsp;(2002)</h2>
<p>The <a href="https://console.cloud.google.com/storage/roberge_2002">Roberge et al.&nbsp;(2002) dataset</a> <span class="citation" data-cites="roberge2002">(<a href="#ref-roberge2002" role="doc-biblioref">Roberge et al., 2002</a>)</span> summarizes associations between stream habitat characteristics and life history stages of 86 species and 13 additional subspecies/forms of freshwater fishes in British Columbia and Yukon. The dataset focuses on stream habitat requirements across four life stages: spawning, young-of-the-year, juvenile, and adult. It highlights significant gaps in knowledge for species groups such as green sturgeon, minnows, smelts, ciscos, suckers, sculpins, lampreys, and sticklebacks, emphasizing the need for further research on stream habitat requirements for these taxa.</p>
<section id="source-and-accessibility-3" class="level3" data-number="3.10.1">
<h3 data-number="3.10.1" class="anchored" data-anchor-id="source-and-accessibility-3"><span class="header-section-number">3.10.1</span> Source and Accessibility</h3>
<ul>
<li><strong>Source</strong>: Fisheries and Oceans Canada, ScienceBase GCS</li>
<li><strong>Accessibility</strong>: Institutional License</li>
<li><strong>Data Type</strong>: Tabular Text File (<code>.txt</code>), PDF Report (<code>.pdf</code>)</li>
<li><strong>Coverage</strong>: British Columbia and Yukon, Canada</li>
<li><strong>Processing Script</strong>: <code>prc_roberge_2002.R</code></li>
<li><strong>Output File</strong>: <code>roberge.csv</code></li>
</ul>
</section>
<section id="processing-steps-9" class="level3" data-number="3.10.2">
<h3 data-number="3.10.2" class="anchored" data-anchor-id="processing-steps-9"><span class="header-section-number">3.10.2</span> Processing Steps</h3>
<p>The dataset was retrieved manually from the report (<code>Fs97-4-2611E.pdf</code>) to create the raw data (<code>Roberge2002.txt</code>). The programmatic processing steps involved:</p>
<ol type="1">
<li><strong>Data Extraction</strong>:
<ul>
<li>Imported the tabular text file with <code>read.delim()</code>.</li>
<li>Filled missing values for habitat and life stage fields using <code>tidyr::fill()</code>.</li>
</ul></li>
<li><strong>Data Restructuring</strong>:
<ul>
<li>Split the data by species groups.</li>
<li>Renamed columns to reflect meaningful variable names (e.g., <code>LifeStage</code>, <code>Value</code>).</li>
<li>Pivoted columns for different life stages (e.g., spawning, juvenile) into a long format using <code>tidyr::pivot_longer()</code>.</li>
</ul></li>
<li><strong>Data Cleaning</strong>:
<ul>
<li>Replaced malformed characters and standardized names using <code>stringr</code> functions.</li>
<li>Filtered rows with missing or invalid values.</li>
</ul></li>
<li><strong>Export</strong>:
<ul>
<li>Saved the processed dataset as a CSV file (<code>roberge.csv</code>) for further analysis.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-9" class="level3" data-number="3.10.3">
<h3 data-number="3.10.3" class="anchored" data-anchor-id="processed-data-structure-9"><span class="header-section-number">3.10.3</span> Processed Data Structure</h3>
<p>The processed dataset contains 5,319 rows and six fields, summarizing habitat characteristics across different life stages for freshwater fish species.</p>
<div class="cell">
<div id="tbl-roberge-structure" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-roberge-structure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.18: Structure of the Roberge Processed Data
</figcaption>
<div aria-describedby="tbl-roberge-structure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 24%">
<col style="width: 76%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">name</td>
<td style="text-align: left;">Common name of the species.</td>
</tr>
<tr class="even">
<td style="text-align: left;">scientificname</td>
<td style="text-align: left;">Scientific name of the species.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MigrationStrategy</td>
<td style="text-align: left;">Migration strategy (e.g., anadromous, potamodromous).</td>
</tr>
<tr class="even">
<td style="text-align: left;">characteristics</td>
<td style="text-align: left;">Stream habitat characteristics (e.g., depth, flow type).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LifeStage</td>
<td style="text-align: left;">Life stage (e.g., Spawning, Juvenile).</td>
</tr>
<tr class="even">
<td style="text-align: left;">Value</td>
<td style="text-align: left;">Habitat value associated with the life stage.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-dahlke" class="level2" data-number="3.11">
<h2 data-number="3.11" class="anchored" data-anchor-id="sec-dahlke"><span class="header-section-number">3.11</span> Dahlke et al.&nbsp;(2020)</h2>
<p>The <a href="https://doi.org/10.1594/PANGAEA.917796">Dahlke et al.&nbsp;(2020)</a> <span class="citation" data-cites="dahlke2020dataset">(<a href="#ref-dahlke2020dataset" role="doc-biblioref">Dahlke et al., 2020b</a>)</span> compiles experimental and imputed thermal tolerance data, thermal safety margins, and responsiveness for various fish species and life stages. It supports the research on fish survival under warming conditions and size-dependent oxygen supply constraints <span class="citation" data-cites="dahlke2020">(<a href="#ref-dahlke2020" role="doc-biblioref">Dahlke et al., 2020a</a>)</span>.</p>
<section id="source-and-accessibility-4" class="level3" data-number="3.11.1">
<h3 data-number="3.11.1" class="anchored" data-anchor-id="source-and-accessibility-4"><span class="header-section-number">3.11.1</span> Source and Accessibility</h3>
<ul>
<li><strong>Source</strong>: PANGAEA - Data Publisher for Earth &amp; Environmental Science</li>
<li><strong>DOI</strong>: <a href="https://doi.org/10.1594/PANGAEA.917796">10.1594/PANGAEA.917796</a></li>
<li><strong>Accessibility</strong>: CC BY 4.0</li>
<li><strong>Data Type</strong>: Excel Spreadsheets</li>
<li><strong>Coverage</strong>: Global</li>
<li><strong>Processing Script</strong>: <code>prc_dahlke_2020.R</code></li>
<li><strong>Output Files</strong>:
<ul>
<li><code>experimental_imputed_tolerance.csv</code></li>
<li><code>thermal_safety_margins.csv</code></li>
<li><code>thermal_responsiveness.csv</code></li>
<li><code>thermal_tolerance.csv</code></li>
</ul></li>
</ul>
</section>
<section id="processing-steps-10" class="level3" data-number="3.11.2">
<h3 data-number="3.11.2" class="anchored" data-anchor-id="processing-steps-10"><span class="header-section-number">3.11.2</span> Processing Steps</h3>
<p>The dataset was harvested and processed from four Excel files hosted on the PANGAEA repository. Each file corresponds to a specific thermal-related aspect, and the processing involved the following steps:</p>
<ol type="1">
<li><strong>Loading Data</strong>:
<ul>
<li>Read data from Excel files (<code>experimental_and_imputed_tolerance_data.xlsx</code>, <code>thermal_safety_margins.xlsx</code>, <code>thermal_responsiveness.xlsx</code>, and <code>thermal_tolerance.xlsx</code>) using <code>readxl</code>.</li>
</ul></li>
<li><strong>Cleaning and Restructuring</strong>:
<ul>
<li>Standardized column names using <code>janitor::clean_names()</code>.</li>
<li>Pivoted wide-format sheets into long-format tables for easier integration.</li>
<li>Filled missing values and cleaned malformed characters.</li>
</ul></li>
<li><strong>Data Integration</strong>:
<ul>
<li>Combined multiple sheets within a single Excel file to create unified datasets.</li>
<li>Merged species-specific attributes across life stages and realms.</li>
</ul></li>
<li><strong>Exporting Processed Data</strong>:
<ul>
<li>Saved cleaned datasets as CSV files (<code>vroom_write</code>) for further analysis.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-10" class="level3" data-number="3.11.3">
<h3 data-number="3.11.3" class="anchored" data-anchor-id="processed-data-structure-10"><span class="header-section-number">3.11.3</span> Processed Data Structure</h3>
<div class="cell">
<div id="tbl-exp-imp-tolerance" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-exp-imp-tolerance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.19: Structure of Experimental and Imputed Tolerance Data
</figcaption>
<div aria-describedby="tbl-exp-imp-tolerance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">life_stage</td>
<td style="text-align: left;">Life stage of the species (e.g., Spawners, Juvenile).</td>
</tr>
<tr class="even">
<td style="text-align: left;">species</td>
<td style="text-align: left;">Species name following FishBase taxonomy.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tmin_c</td>
<td style="text-align: left;">Minimum temperature (°C) tolerance.</td>
</tr>
<tr class="even">
<td style="text-align: left;">tmax_c</td>
<td style="text-align: left;">Maximum temperature (°C) tolerance.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tmid_c</td>
<td style="text-align: left;">Midpoint temperature (°C) between Tmin and Tmax.</td>
</tr>
<tr class="even">
<td style="text-align: left;">trange_c</td>
<td style="text-align: left;">Range of temperature tolerance (°C).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">reference</td>
<td style="text-align: left;">Citation for the data source.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<div id="tbl-thermal-responsiveness" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-thermal-responsiveness-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.20: Structure of Thermal Responsiveness Data
</figcaption>
<div aria-describedby="tbl-thermal-responsiveness-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 11%">
<col style="width: 88%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">species</td>
<td style="text-align: left;">Species name following FishBase taxonomy.</td>
</tr>
<tr class="even">
<td style="text-align: left;">lifestage</td>
<td style="text-align: left;">Life stage associated with the thermal response (e.g., Embryos, Juveniles).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">response</td>
<td style="text-align: left;">Type of response (e.g., Development Rate, Survival).</td>
</tr>
<tr class="even">
<td style="text-align: left;">trange_c</td>
<td style="text-align: left;">Range of temperature (°C) associated with the response.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tmid_c</td>
<td style="text-align: left;">Midpoint temperature (°C) for the response.</td>
</tr>
<tr class="even">
<td style="text-align: left;">reference</td>
<td style="text-align: left;">Citation for the data source.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<div id="tbl-thermal-safety-margins" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-thermal-safety-margins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.21: Structure of Thermal Safety Margins Data
</figcaption>
<div aria-describedby="tbl-thermal-safety-margins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 21%">
<col style="width: 78%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">species</td>
<td style="text-align: left;">Species name following FishBase taxonomy.</td>
</tr>
<tr class="even">
<td style="text-align: left;">realm</td>
<td style="text-align: left;">Habitat realm of the species (e.g., Freshwater, Marine).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">depth_spawners</td>
<td style="text-align: left;">Spawning depth range in meters.</td>
</tr>
<tr class="even">
<td style="text-align: left;">depths_embryos</td>
<td style="text-align: left;">Embryo depth range in meters.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">spawning_season</td>
<td style="text-align: left;">Seasonality of spawning (e.g., MJJ for May–July).</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<div id="tbl-thermal-tolerance" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-thermal-tolerance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.22: Structure of Thermal Tolerance Data
</figcaption>
<div aria-describedby="tbl-thermal-tolerance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell table table-sm table-striped small">
<colgroup>
<col style="width: 24%">
<col style="width: 76%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">thermal_tolerance</td>
<td style="text-align: left;">Thermal tolerance parameter (e.g., Tmax, Tmin).</td>
</tr>
<tr class="even">
<td style="text-align: left;">species_fish_base</td>
<td style="text-align: left;">Species name following FishBase taxonomy.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">latitude</td>
<td style="text-align: left;">Geographic latitude of observation.</td>
</tr>
<tr class="even">
<td style="text-align: left;">lifestage</td>
<td style="text-align: left;">Life stage of the species (e.g., Spawner, Embryo).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tmax_c</td>
<td style="text-align: left;">Maximum temperature (°C) tolerance.</td>
</tr>
<tr class="even">
<td style="text-align: left;">tmin_c</td>
<td style="text-align: left;">Minimum temperature (°C) tolerance.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">trange_c</td>
<td style="text-align: left;">Range of temperature tolerance (°C).</td>
</tr>
<tr class="even">
<td style="text-align: left;">realm</td>
<td style="text-align: left;">Habitat realm of the species (e.g., Marine, Freshwater).</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-fishbase" class="level2" data-number="3.12">
<h2 data-number="3.12" class="anchored" data-anchor-id="sec-fishbase"><span class="header-section-number">3.12</span> FishBase</h2>
<p>The <a href="https://www.fishbase.org">FishBase dataset</a> <span class="citation" data-cites="froese2024">(<a href="#ref-froese2024" role="doc-biblioref">Froese and Pauly, 2024</a>)</span> provides a comprehensive database of global fish species, covering taxonomic, ecological, and biological attributes. Using the <code>rfishbase</code> R package <span class="citation" data-cites="boettiger2012">(<a href="#ref-boettiger2012" role="doc-biblioref">Boettiger et al., 2012</a>)</span>, this dataset was retrieved via API queries and includes species information, habitat details, growth patterns, diet, reproduction, and distribution data.</p>
<section id="source-and-accessibility-5" class="level3" data-number="3.12.1">
<h3 data-number="3.12.1" class="anchored" data-anchor-id="source-and-accessibility-5"><span class="header-section-number">3.12.1</span> Source and Accessibility</h3>
<ul>
<li><strong>Source</strong>: FishBase API via <code>rfishbase</code></li>
<li><strong>DOI</strong>: <a href="https://www.fishbase.org">https://www.fishbase.org</a></li>
<li><strong>Accessibility</strong>: FishBase Terms of Use</li>
<li><strong>Data Type</strong>: API Queries</li>
<li><strong>Coverage</strong>: Global</li>
<li><strong>Processing Script</strong>: <code>download_fishbase.R</code></li>
<li><strong>Output Files</strong>:
<ul>
<li><code>species.csv</code></li>
<li><code>fecundity.csv</code></li>
<li><code>reproduc.csv</code></li>
<li><code>eggdev.csv</code></li>
<li><code>larvdyn.csv</code></li>
<li><code>fooditems.csv</code></li>
<li><code>ecology.csv</code></li>
<li><code>swimming.csv</code></li>
<li><code>spawning_traits.csv</code></li>
<li><code>spawning_phenology.csv</code></li>
<li><code>larvae_traits.csv</code></li>
<li><code>larvae_phenology.csv</code></li>
<li><code>larvaepresence_phenology.csv</code></li>
</ul></li>
</ul>
</section>
<section id="data-retrieval" class="level3" data-number="3.12.2">
<h3 data-number="3.12.2" class="anchored" data-anchor-id="data-retrieval"><span class="header-section-number">3.12.2</span> Data retrieval</h3>
<p>FishBase provides over 200 tables, all of which were summarily searched for relevance on the context of the current project. The final list of tables considered is available here in the following table:</p>
<table class="table">
<colgroup>
<col style="width: 55%">
<col style="width: 44%">
</colgroup>
<thead>
<tr class="header">
<th>Table Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>ecology</code></td>
<td>Includes ecological traits such as habitat preference, migratory behavior, and feeding mode.</td>
</tr>
<tr class="even">
<td><code>eggdev</code></td>
<td>Details on egg development stages and environmental influences.</td>
</tr>
<tr class="odd">
<td><code>fecundity</code></td>
<td>Contains information on fish fecundity, including egg production and reproductive output.</td>
</tr>
<tr class="even">
<td><code>fooditems</code></td>
<td>Provides detailed information on specific food items consumed by fish.</td>
</tr>
<tr class="odd">
<td><code>larvae</code></td>
<td>Contains larval traits and early life stage characteristics.</td>
</tr>
<tr class="even">
<td><code>larvaepresence</code></td>
<td>Information on the presence of larvae in different locations.</td>
</tr>
<tr class="odd">
<td><code>larvdyn</code></td>
<td>Provides data on larval dynamics, including movement and growth.</td>
</tr>
<tr class="even">
<td><code>reproduc</code></td>
<td>Provides reproductive characteristics, including spawning type and parental care.</td>
</tr>
<tr class="odd">
<td><code>spawning</code></td>
<td>Details spawning behavior, including seasonality, habitat, and locations.</td>
</tr>
<tr class="even">
<td><code>species</code></td>
<td>Main table containing taxonomic and biological information on fish species.</td>
</tr>
<tr class="odd">
<td><code>swimming</code></td>
<td>Provides information on fish swimming capabilities, including speed and behavior.</td>
</tr>
</tbody>
</table>
</section>
<section id="processing-steps-11" class="level3" data-number="3.12.3">
<h3 data-number="3.12.3" class="anchored" data-anchor-id="processing-steps-11"><span class="header-section-number">3.12.3</span> Processing Steps</h3>
<p>The dataset was harvested using API queries to FishBase via <code>rfishbase</code>. The processing steps involved, but are not limited to:</p>
<ol type="1">
<li><strong>Fetching Data</strong>:
<ul>
<li>Extracted tables covering species, fecundity, reproduction, egg development, larval dynamics, food items, ecology, and swimming behavior.</li>
<li>Queried FishBase for spawning, larval phenology, and larval presence phenology.</li>
</ul></li>
<li><strong>Data Cleaning &amp; Standardization</strong>:
<ul>
<li>Standardized column names with <code>janitor::clean_names()</code>.</li>
<li>Filtered species based on the reference list of freshwater fish species in Canada.</li>
<li>Removed redundant columns and transformed categorical variables for consistency.</li>
</ul></li>
<li><strong>Data Structuring</strong>:
<ul>
<li>Merged multiple sources of reproductive data to create a unified <code>reproduc.csv</code> file.</li>
<li>Created long-format data for spawning and larval phenology to facilitate time-series analyses.</li>
<li>Consolidated habitat data for ecological profiling.</li>
</ul></li>
<li><strong>Exporting Processed Data</strong>:
<ul>
<li>Saved all cleaned tables as CSV files for further analyses.</li>
</ul></li>
</ol>
</section>
<section id="individual-tables" class="level3" data-number="3.12.4">
<h3 data-number="3.12.4" class="anchored" data-anchor-id="individual-tables"><span class="header-section-number">3.12.4</span> Individual Tables</h3>
<section id="ecology-ecology" class="level4" data-number="3.12.4.1">
<h4 data-number="3.12.4.1" class="anchored" data-anchor-id="ecology-ecology"><span class="header-section-number">3.12.4.1</span> Ecology (<code>ecology</code>)</h4>
<section id="explanation-of-data-content" class="level5" data-number="3.12.4.1.1">
<h5 data-number="3.12.4.1.1" class="anchored" data-anchor-id="explanation-of-data-content"><span class="header-section-number">3.12.4.1.1</span> Explanation of Data Content</h5>
<p>The <strong>Ecology Table</strong> in FishBase <a href="https://www.fishbase.se/manual/fishbasethe_ecology_table.htm">reference</a> provides information on species habitat preferences, depth range, trophic levels, and associations with different aquatic environments.</p>
<ul>
<li><strong>Trophic Levels (<code>diet_troph</code>, <code>food_troph</code>)</strong>:
<ul>
<li><code>diet_troph</code>: The trophic level of the species based on its diet.</li>
<li><code>food_troph</code>: The trophic level of the species based on observed food intake.</li>
</ul></li>
<li><strong>Habitat Zones</strong>:
<ul>
<li><strong>Marine and Coastal Zones</strong>: Includes <code>neritic</code>, <code>supra_littoral_zone</code>, <code>saltmarshes</code>, <code>littoral_zone</code>, <code>tide_pools</code>, <code>intertidal</code>, <code>sub_littoral</code>, <code>oceanic</code>, <code>epipelagic</code>, <code>mesopelagic</code>, <code>bathypelagic</code>, <code>abyssopelagic</code>, and <code>hadopelagic</code>.</li>
<li><strong>Freshwater and Transitional Habitats</strong>: Includes <code>estuaries</code>, <code>mangroves</code>, <code>marshes_swamps</code>, <code>stream</code>, <code>lakes</code>, and <code>caves</code>.</li>
</ul></li>
<li><strong>Substrate Preferences</strong>:
<ul>
<li>Different substrate types are recorded, such as <code>soft_bottom</code>, <code>sand</code>, <code>coarse</code>, <code>fine</code>, <code>level</code>, <code>sloping</code>, <code>silt</code>, <code>mud</code>, <code>ooze</code>, <code>detritus</code>, <code>organic</code>, <code>hard_bottom</code>, <code>rocky</code>, <code>rubble</code>, <code>gravel</code>, <code>vegetation</code>, and <code>driftwood</code>.</li>
</ul></li>
</ul>
<p>These fields allow researchers to analyze species distributions across environments, their interactions within ecosystems, and their adaptability to changing conditions.</p>
</section>
<section id="processing" class="level5" data-number="3.12.4.1.2">
<h5 data-number="3.12.4.1.2" class="anchored" data-anchor-id="processing"><span class="header-section-number">3.12.4.1.2</span> Processing</h5>
<p>The <code>ecology.csv</code> file was generated using the following processing steps:</p>
<ol type="1">
<li><strong>Selection of Relevant Fields</strong>:
<ul>
<li>Chose species-related ecological fields, including habitat zones, trophic levels, and substrate preferences.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>Converted missing values (<code>NA</code>) to <code>0</code> where appropriate for habitat presence/absence.</li>
<li>Replaced <code>-1</code> values with <code>1</code> to indicate presence in binary habitat fields.</li>
<li>Applied <code>dplyr::mutate()</code> to ensure correct encoding of categorical variables.</li>
</ul></li>
<li><strong>Filtering &amp; Summarization</strong>:
<ul>
<li>Filtered rows where all habitat presence indicators were <code>0</code> to remove non-relevant entries.</li>
<li>Used <code>dplyr::group_by(spec_code)</code> and <code>dplyr::summarise()</code> to compute mean trophic levels and aggregate habitat presence across multiple observations.</li>
</ul></li>
<li><strong>Exporting Cleaned Data</strong>:
<ul>
<li>The final dataset was written to <code>ecology.csv</code> for downstream analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-11" class="level5" data-number="3.12.4.1.3">
<h5 data-number="3.12.4.1.3" class="anchored" data-anchor-id="processed-data-structure-11"><span class="header-section-number">3.12.4.1.3</span> Processed Data Structure</h5>
<table class="table">
<colgroup>
<col style="width: 29%">
<col style="width: 70%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>diet_troph</td>
<td>Trophic level based on diet</td>
</tr>
<tr class="odd">
<td>food_troph</td>
<td>Trophic level based on food intake</td>
</tr>
<tr class="even">
<td>neritic</td>
<td>Presence in neritic zones (binary)</td>
</tr>
<tr class="odd">
<td>supra_littoral_zone</td>
<td>Presence in supra-littoral zones (binary)</td>
</tr>
<tr class="even">
<td>saltmarshes</td>
<td>Presence in saltmarshes (binary)</td>
</tr>
<tr class="odd">
<td>littoral_zone</td>
<td>Presence in littoral zones (binary)</td>
</tr>
<tr class="even">
<td>tide_pools</td>
<td>Presence in tide pools (binary)</td>
</tr>
<tr class="odd">
<td>intertidal</td>
<td>Presence in intertidal zones (binary)</td>
</tr>
<tr class="even">
<td>sub_littoral</td>
<td>Presence in sub-littoral zones (binary)</td>
</tr>
<tr class="odd">
<td>caves</td>
<td>Presence in caves (binary)</td>
</tr>
<tr class="even">
<td>oceanic</td>
<td>Presence in oceanic zones (binary)</td>
</tr>
<tr class="odd">
<td>epipelagic</td>
<td>Presence in epipelagic zones (binary)</td>
</tr>
<tr class="even">
<td>mesopelagic</td>
<td>Presence in mesopelagic zones (binary)</td>
</tr>
<tr class="odd">
<td>bathypelagic</td>
<td>Presence in bathypelagic zones (binary)</td>
</tr>
<tr class="even">
<td>abyssopelagic</td>
<td>Presence in abyssopelagic zones (binary)</td>
</tr>
<tr class="odd">
<td>hadopelagic</td>
<td>Presence in hadopelagic zones (binary)</td>
</tr>
<tr class="even">
<td>estuaries</td>
<td>Presence in estuaries (binary)</td>
</tr>
<tr class="odd">
<td>mangroves</td>
<td>Presence in mangroves (binary)</td>
</tr>
<tr class="even">
<td>marshes_swamps</td>
<td>Presence in marshes and swamps (binary)</td>
</tr>
<tr class="odd">
<td>cave_anchialine</td>
<td>Presence in anchialine caves (binary)</td>
</tr>
<tr class="even">
<td>stream</td>
<td>Presence in streams (binary)</td>
</tr>
<tr class="odd">
<td>lakes</td>
<td>Presence in lakes (binary)</td>
</tr>
<tr class="even">
<td>cave</td>
<td>Presence in caves (binary)</td>
</tr>
<tr class="odd">
<td>cave2</td>
<td>Additional cave habitat information (binary)</td>
</tr>
<tr class="even">
<td>soft_bottom</td>
<td>Preference for soft bottom substrates (binary)</td>
</tr>
<tr class="odd">
<td>sand</td>
<td>Preference for sand substrates (binary)</td>
</tr>
<tr class="even">
<td>coarse</td>
<td>Preference for coarse substrates (binary)</td>
</tr>
<tr class="odd">
<td>fine</td>
<td>Preference for fine substrates (binary)</td>
</tr>
<tr class="even">
<td>level</td>
<td>Preference for level substrates (binary)</td>
</tr>
<tr class="odd">
<td>sloping</td>
<td>Preference for sloping substrates (binary)</td>
</tr>
<tr class="even">
<td>silt</td>
<td>Preference for silt substrates (binary)</td>
</tr>
<tr class="odd">
<td>mud</td>
<td>Preference for mud substrates (binary)</td>
</tr>
<tr class="even">
<td>ooze</td>
<td>Preference for ooze substrates (binary)</td>
</tr>
<tr class="odd">
<td>detritus</td>
<td>Presence of detritus (binary)</td>
</tr>
<tr class="even">
<td>organic</td>
<td>Presence of organic matter (binary)</td>
</tr>
<tr class="odd">
<td>hard_bottom</td>
<td>Preference for hard bottom substrates (binary)</td>
</tr>
<tr class="even">
<td>rocky</td>
<td>Preference for rocky habitats (binary)</td>
</tr>
<tr class="odd">
<td>rubble</td>
<td>Preference for rubble habitats (binary)</td>
</tr>
<tr class="even">
<td>gravel</td>
<td>Preference for gravel habitats (binary)</td>
</tr>
<tr class="odd">
<td>vegetation</td>
<td>Presence in vegetated habitats (binary)</td>
</tr>
<tr class="even">
<td>driftwood</td>
<td>Presence near driftwood (binary)</td>
</tr>
<tr class="odd">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="egg-development-eggdev" class="level4" data-number="3.12.4.2">
<h4 data-number="3.12.4.2" class="anchored" data-anchor-id="egg-development-eggdev"><span class="header-section-number">3.12.4.2</span> Egg Development (<code>eggdev</code>)</h4>
<section id="explanation-of-data-content-1" class="level5" data-number="3.12.4.2.1">
<h5 data-number="3.12.4.2.1" class="anchored" data-anchor-id="explanation-of-data-content-1"><span class="header-section-number">3.12.4.2.1</span> Explanation of Data Content</h5>
<p>The <strong>Egg Development Table</strong> in FishBase <a href="https://fishbase.se/manual/english/FishBaseThe_eggdev_Table.htm">reference</a> provides details on the environmental conditions required for fish eggs to develop.</p>
<ul>
<li><strong>Temperature Requirements (<code>temperature</code>)</strong>:
<ul>
<li>Represents the mean recorded temperature at which eggs develop.</li>
<li>Understanding thermal tolerance at the egg stage is essential for studying species adaptations to different climatic conditions.</li>
</ul></li>
<li><strong>Salinity Preferences (<code>freshwater</code>, <code>brackish</code>)</strong>:
<ul>
<li><strong>Freshwater (<code>freshwater</code>)</strong>: Indicates whether a species’ eggs develop in freshwater conditions.</li>
<li><strong>Brackish (<code>brackish</code>)</strong>: Indicates whether eggs can develop in brackish environments.</li>
<li>These values help identify species that can tolerate a range of salinities, which is useful for habitat conservation and management.</li>
</ul></li>
</ul>
</section>
<section id="processing-1" class="level5" data-number="3.12.4.2.2">
<h5 data-number="3.12.4.2.2" class="anchored" data-anchor-id="processing-1"><span class="header-section-number">3.12.4.2.2</span> Processing</h5>
<p>The <code>eggdev.csv</code> file was generated using the following processing steps:</p>
<ol type="1">
<li><strong>Selection of Relevant Fields</strong>:
<ul>
<li>Extracted species-related egg development fields, including temperature and salinity preferences.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>Computed the mean temperature per species using <code>dplyr::group_by()</code> and <code>summarize()</code>.</li>
<li>Converted missing values (<code>NA</code>) to <code>0</code> where appropriate for salinity preferences.</li>
<li>Restructured the salinity data using <code>tidyr::pivot_wider()</code> to create binary presence/absence indicators for freshwater and brackish environments.</li>
</ul></li>
<li><strong>Filtering &amp; Summarization</strong>:
<ul>
<li>Removed species with no recorded temperature or salinity values.</li>
<li>Aggregated multiple records per species to avoid redundancy.</li>
</ul></li>
<li><strong>Exporting Cleaned Data</strong>:
<ul>
<li>The final dataset was written to <code>eggdev.csv</code> for further analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-12" class="level5" data-number="3.12.4.2.3">
<h5 data-number="3.12.4.2.3" class="anchored" data-anchor-id="processed-data-structure-12"><span class="header-section-number">3.12.4.2.3</span> Processed Data Structure</h5>
<table class="table">
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>temperature</td>
<td>Mean recorded temperature during egg development</td>
</tr>
<tr class="odd">
<td>freshwater</td>
<td>Presence in freshwater environments (binary)</td>
</tr>
<tr class="even">
<td>brackish</td>
<td>Presence in brackish environments (binary)</td>
</tr>
<tr class="odd">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="fecundity-fecundity" class="level4" data-number="3.12.4.3">
<h4 data-number="3.12.4.3" class="anchored" data-anchor-id="fecundity-fecundity"><span class="header-section-number">3.12.4.3</span> Fecundity (<code>fecundity</code>)</h4>
<section id="explanation-of-data-content-2" class="level5" data-number="3.12.4.3.1">
<h5 data-number="3.12.4.3.1" class="anchored" data-anchor-id="explanation-of-data-content-2"><span class="header-section-number">3.12.4.3.1</span> Explanation of Data Content</h5>
<p>The <strong>Fecundity Table</strong> in FishBase provides information on the reproductive capacity of fish species, specifically focusing on the number of eggs produced per spawning event.</p>
<ul>
<li><strong>Fecundity Estimates (<code>fecundity_min</code>, <code>fecundity_max</code>)</strong>:
<ul>
<li>Represents the estimated range of eggs produced per spawning event.</li>
<li><code>fecundity_min</code>: The lowest recorded number of eggs produced.</li>
<li><code>fecundity_max</code>: The highest recorded number of eggs produced.</li>
<li>These values help assess species reproductive potential and variability in spawning output.</li>
</ul></li>
<li><strong>Fecundity Factors</strong>:
<ul>
<li>While not included in this dataset, fecundity in FishBase is often linked to factors like <strong>body size, reproductive strategy, and environmental conditions</strong>.</li>
</ul></li>
</ul>
</section>
<section id="processing-2" class="level5" data-number="3.12.4.3.2">
<h5 data-number="3.12.4.3.2" class="anchored" data-anchor-id="processing-2"><span class="header-section-number">3.12.4.3.2</span> Processing</h5>
<p>The <code>fecundity.csv</code> file was generated using the following processing steps:</p>
<ol type="1">
<li><strong>Selection of Relevant Fields</strong>:
<ul>
<li>Extracted species-related fecundity fields, including minimum and maximum fecundity estimates.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>Computed the mean fecundity values for species with multiple records using <code>dplyr::group_by()</code> and <code>summarize()</code>.</li>
<li>Ensured missing values (<code>NA</code>) were excluded from the mean calculations.</li>
</ul></li>
<li><strong>Filtering &amp; Summarization</strong>:
<ul>
<li>Removed species with no available fecundity data to retain only informative records.</li>
</ul></li>
<li><strong>Exporting Cleaned Data</strong>:
<ul>
<li>The final dataset was written to <code>fecundity.csv</code> for further analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-13" class="level5" data-number="3.12.4.3.3">
<h5 data-number="3.12.4.3.3" class="anchored" data-anchor-id="processed-data-structure-13"><span class="header-section-number">3.12.4.3.3</span> Processed Data Structure</h5>
<table class="table">
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>fecundity_min</td>
<td>Mean minimum recorded fecundity</td>
</tr>
<tr class="odd">
<td>fecundity_max</td>
<td>Mean maximum recorded fecundity</td>
</tr>
<tr class="even">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="food-items-fooditems" class="level4" data-number="3.12.4.4">
<h4 data-number="3.12.4.4" class="anchored" data-anchor-id="food-items-fooditems"><span class="header-section-number">3.12.4.4</span> Food Items (<code>fooditems</code>)</h4>
<section id="explanation-of-data-content-3" class="level5" data-number="3.12.4.4.1">
<h5 data-number="3.12.4.4.1" class="anchored" data-anchor-id="explanation-of-data-content-3"><span class="header-section-number">3.12.4.4.1</span> Explanation of Data Content</h5>
<p>The <strong>Food Items Table</strong> in FishBase <a href="https://fishbase.se/manual/english/FishBaseThe_FOOD_ITEMS_table.htm">reference</a> provides insights into the dietary composition of fish species, documenting the type of prey consumed and the life stages at which they are eaten. This dataset helps in understanding feeding ecology, trophic interactions, and the role of fish species in food webs.</p>
<ul>
<li><strong>Primary, Secondary, and Tertiary Food Items (<code>food_i</code>, <code>food_ii</code>, <code>food_iii</code>)</strong>:
<ul>
<li><code>food_i</code>: Broad food category such as detritus, nekton, or plankton.</li>
<li><code>food_ii</code>: More specific classification within <code>food_i</code> (e.g., finfish under nekton, cephalopods under mollusks).</li>
<li><code>food_iii</code>: The most specific food category, detailing exact prey type (e.g., squids/cuttlefish, bony fish, carcasses).</li>
</ul></li>
<li><strong>Prey and Predator Life Stages (<code>prey_stage</code>, <code>predator_stage</code>)</strong>:
<ul>
<li>Specifies the developmental stages of both prey and predator (e.g., larval, juvenile, adult).</li>
<li>Indicates at what stage of life a fish species consumes specific types of prey.</li>
</ul></li>
</ul>
</section>
<section id="processing-3" class="level5" data-number="3.12.4.4.2">
<h5 data-number="3.12.4.4.2" class="anchored" data-anchor-id="processing-3"><span class="header-section-number">3.12.4.4.2</span> Processing</h5>
<p>The <code>fooditems.csv</code> file was generated using the following processing steps:</p>
<ol type="1">
<li><strong>Selection of Relevant Fields</strong>:
<ul>
<li>Extracted dietary data related to fish feeding habits, including primary (<code>food_i</code>), secondary (<code>food_ii</code>), and tertiary (<code>food_iii</code>) food items.</li>
<li>Included details on prey and predator life stages (<code>prey_stage</code>, <code>predator_stage</code>).</li>
<li>Retained geospatial fields (<code>country</code>, <code>longitude</code>, <code>latitude</code>) where available.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>Standardized food category names for consistency.</li>
<li>Ensured missing values (<code>NA</code>) were preserved where information was unavailable.</li>
</ul></li>
<li><strong>Geospatial Information Handling</strong>:
<ul>
<li>Included location-based data where available to associate feeding habits with geographic distribution.</li>
<li>Maintained missing values for species with unreported feeding locations.</li>
</ul></li>
<li><strong>Exporting Cleaned Data</strong>:
<ul>
<li>The final dataset was written to <code>fooditems.csv</code> for further analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-14" class="level5" data-number="3.12.4.4.3">
<h5 data-number="3.12.4.4.3" class="anchored" data-anchor-id="processed-data-structure-14"><span class="header-section-number">3.12.4.4.3</span> Processed Data Structure</h5>
<table class="table">
<colgroup>
<col style="width: 19%">
<col style="width: 80%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>country</td>
<td>Country where the food record was observed</td>
</tr>
<tr class="odd">
<td>longitude</td>
<td>Longitude of the food observation</td>
</tr>
<tr class="even">
<td>latitude</td>
<td>Latitude of the food observation</td>
</tr>
<tr class="odd">
<td>food_i</td>
<td>Primary food category (e.g., detritus, nekton, plankton)</td>
</tr>
<tr class="even">
<td>food_ii</td>
<td>Secondary food category (e.g., cephalopods, finfish)</td>
</tr>
<tr class="odd">
<td>food_iii</td>
<td>Tertiary food category (e.g., squids/cuttlefish, bony fish)</td>
</tr>
<tr class="even">
<td>prey_stage</td>
<td>Life stage of the prey (e.g., larvae, juvenile, adult)</td>
</tr>
<tr class="odd">
<td>predator_stage</td>
<td>Life stage of the predator (e.g., larvae, juvenile, adult)</td>
</tr>
<tr class="even">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="larvae-larvae" class="level4" data-number="3.12.4.5">
<h4 data-number="3.12.4.5" class="anchored" data-anchor-id="larvae-larvae"><span class="header-section-number">3.12.4.5</span> Larvae (<code>larvae</code>)</h4>
<section id="explanation-of-data-content-4" class="level5" data-number="3.12.4.5.1">
<h5 data-number="3.12.4.5.1" class="anchored" data-anchor-id="explanation-of-data-content-4"><span class="header-section-number">3.12.4.5.1</span> Explanation of Data Content</h5>
<p>The <strong>Larvae Table</strong> in FishBase <a href="https://www.fishbase.se/manual/fishbasethe_larvae_table.htm">reference</a> contains detailed information about the early life stages of fish species, including their developmental traits and seasonal presence.</p>
<ul>
<li><strong>Larval Traits (<code>larvae_traits</code>)</strong>:
<ul>
<li><strong>Place of Development (<code>placeof_development</code>)</strong>: Describes where larvae develop (e.g., planktonic, in a closed nest, on the substrate).</li>
<li><strong>Larval Duration (<code>larval_duration_min</code>, <code>larval_duration_max</code>, <code>larval_duration_mod</code>)</strong>: Duration of the larval stage in days, with minimum, maximum, and modal estimates.</li>
<li><strong>Shape of Yolk Sac (<code>shapeofyolksac</code>)</strong>: Describes the yolk sac morphology, which can influence larval survival.</li>
<li><strong>Body Form (<code>body_form</code>)</strong>: Indicates whether larvae are fusiform, elongated, or have another body shape.</li>
</ul></li>
<li><strong>Larval Phenology (<code>larvae_phenology</code>)</strong>:
<ul>
<li><strong>Locality (<code>locality</code>)</strong>: Provides the geographic region where larval presence was recorded.</li>
<li><strong>Monthly Presence (<code>jan</code>–<code>dec</code>)</strong>: Indicates the months in which larvae were observed (1 = present, 0 = absent).</li>
<li>This data is essential for tracking seasonal spawning patterns and larval dispersal dynamics.</li>
</ul></li>
</ul>
</section>
<section id="processing-4" class="level5" data-number="3.12.4.5.2">
<h5 data-number="3.12.4.5.2" class="anchored" data-anchor-id="processing-4"><span class="header-section-number">3.12.4.5.2</span> Processing</h5>
<p>The <code>larvae_traits.csv</code> and <code>larvae_phenology.csv</code> files were generated using the following processing steps:</p>
<ol type="1">
<li><strong>Selection of Relevant Fields</strong>:
<ul>
<li>For <code>larvae_traits.csv</code>: Selected species-related developmental traits, including duration, yolk sac shape, and body form.</li>
<li>For <code>larvae_phenology.csv</code>: Selected locality and monthly larval presence indicators.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>Standardized categorical variables such as <code>body_form</code> to ensure consistency (e.g., converting “eel-like” to “elongated”).</li>
<li>Converted missing values (<code>NA</code>) to <code>0</code> for monthly larval presence data.</li>
<li>Used <code>dplyr::mutate()</code> to standardize habitat descriptors.</li>
</ul></li>
<li><strong>Filtering &amp; Summarization</strong>:
<ul>
<li>Removed entries where no larval traits were recorded.</li>
<li>Ensured only species with confirmed larval presence were retained in <code>larvae_phenology.csv</code>.</li>
</ul></li>
<li><strong>Exporting Cleaned Data</strong>:
<ul>
<li>The final datasets were written to <code>larvae_traits.csv</code> and <code>larvae_phenology.csv</code> for further analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-15" class="level5" data-number="3.12.4.5.3">
<h5 data-number="3.12.4.5.3" class="anchored" data-anchor-id="processed-data-structure-15"><span class="header-section-number">3.12.4.5.3</span> Processed Data Structure</h5>
<section id="larval-traits-larvae_traits.csv" class="level6" data-number="3.12.4.5.3.1">
<h6 data-number="3.12.4.5.3.1" class="anchored" data-anchor-id="larval-traits-larvae_traits.csv"><span class="header-section-number">3.12.4.5.3.1</span> Larval Traits (<code>larvae_traits.csv</code>)</h6>
<table class="table">
<colgroup>
<col style="width: 29%">
<col style="width: 70%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>placeof_development</td>
<td>Location of larval development (e.g., planktonic)</td>
</tr>
<tr class="odd">
<td>larval_duration_min</td>
<td>Minimum larval duration (days)</td>
</tr>
<tr class="even">
<td>larval_duration_max</td>
<td>Maximum larval duration (days)</td>
</tr>
<tr class="odd">
<td>larval_duration_mod</td>
<td>Modal larval duration (days)</td>
</tr>
<tr class="even">
<td>shapeofyolksac</td>
<td>Shape of yolk sac</td>
</tr>
<tr class="odd">
<td>body_form</td>
<td>Larval body form (e.g., fusiform, elongated)</td>
</tr>
<tr class="even">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
<section id="larval-phenology-larvae_phenology.csv" class="level6" data-number="3.12.4.5.3.2">
<h6 data-number="3.12.4.5.3.2" class="anchored" data-anchor-id="larval-phenology-larvae_phenology.csv"><span class="header-section-number">3.12.4.5.3.2</span> Larval Phenology (<code>larvae_phenology.csv</code>)</h6>
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 83%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>locality</td>
<td>Geographic location of larval observations</td>
</tr>
<tr class="odd">
<td>jan-dec</td>
<td>Monthly indicators of larval presence (1 = present, 0 = absent)</td>
</tr>
<tr class="even">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="larval-presence-larvaepresence" class="level4" data-number="3.12.4.6">
<h4 data-number="3.12.4.6" class="anchored" data-anchor-id="larval-presence-larvaepresence"><span class="header-section-number">3.12.4.6</span> Larval Presence (<code>larvaepresence</code>)</h4>
<section id="explanation-of-data-content-5" class="level5" data-number="3.12.4.6.1">
<h5 data-number="3.12.4.6.1" class="anchored" data-anchor-id="explanation-of-data-content-5"><span class="header-section-number">3.12.4.6.1</span> Explanation of Data Content</h5>
<p>The <strong>Larval Presence Table</strong> in FishBase provides information on the geographic and seasonal occurrence of fish larvae.</p>
<ul>
<li><strong>Monthly Presence (<code>jan</code>–<code>dec</code>)</strong>:
<ul>
<li>Indicates the months in which larvae were observed at a given location.</li>
<li>Values are <strong>binary</strong> (<code>1</code> = present, <code>0</code> = absent), providing insight into seasonal larval distributions.</li>
</ul></li>
</ul>
</section>
<section id="processing-5" class="level5" data-number="3.12.4.6.2">
<h5 data-number="3.12.4.6.2" class="anchored" data-anchor-id="processing-5"><span class="header-section-number">3.12.4.6.2</span> Processing</h5>
<p>The <code>larvaepresence_phenology.csv</code> file was generated using the following processing steps:</p>
<ol type="1">
<li><strong>Selection of Relevant Fields</strong>:
<ul>
<li>Retained species identification, geographic location, and monthly larval presence indicators.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>Converted <strong>missing values (<code>NA</code>)</strong> to <code>0</code>, indicating no recorded presence.</li>
<li>Replaced occurrences of <code>111</code> with <code>1</code>, ensuring correct binary encoding.</li>
<li>Used <code>dplyr::mutate()</code> to standardize monthly presence values.</li>
</ul></li>
<li><strong>Filtering &amp; Summarization</strong>:
<ul>
<li>Removed species without any recorded larval presence.</li>
<li>Ensured that at least one month contained larval presence data before inclusion in the final dataset.</li>
</ul></li>
<li><strong>Exporting Cleaned Data</strong>:
<ul>
<li>The final dataset was written to <code>larvaepresence_phenology.csv</code> for further analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-16" class="level5" data-number="3.12.4.6.3">
<h5 data-number="3.12.4.6.3" class="anchored" data-anchor-id="processed-data-structure-16"><span class="header-section-number">3.12.4.6.3</span> Processed Data Structure</h5>
<table class="table">
<colgroup>
<col style="width: 15%">
<col style="width: 84%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>country</td>
<td>Country where the larval presence was observed</td>
</tr>
<tr class="odd">
<td>longitude</td>
<td>Longitude of the observation site</td>
</tr>
<tr class="even">
<td>latitude</td>
<td>Latitude of the observation site</td>
</tr>
<tr class="odd">
<td>jan-dec</td>
<td>Monthly indicators of larval presence (<code>1</code> = present, <code>0</code> = absent)</td>
</tr>
<tr class="even">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="larval-dynamics-larvdyn" class="level4" data-number="3.12.4.7">
<h4 data-number="3.12.4.7" class="anchored" data-anchor-id="larval-dynamics-larvdyn"><span class="header-section-number">3.12.4.7</span> Larval Dynamics (<code>larvdyn</code>)</h4>
<section id="explanation-of-data-content-6" class="level5" data-number="3.12.4.7.1">
<h5 data-number="3.12.4.7.1" class="anchored" data-anchor-id="explanation-of-data-content-6"><span class="header-section-number">3.12.4.7.1</span> Explanation of Data Content</h5>
<p>The <strong>Larval Dynamics Table</strong> in FishBase <a href="https://fishbase.se/manual/english/FishBaseHoude_and_Zastrows_LARVDYN_Table.htm">reference</a> provides data on the environmental conditions affecting fish larvae, including ecosystem type, water temperature, and larval duration.</p>
<ul>
<li><strong>Ecosystem (<code>ecosystem</code>)</strong>:
<ul>
<li>Describes the habitat type where larval development occurs (e.g., <strong>Shelf</strong>, <strong>Freshwater</strong>, <strong>Marine</strong>).</li>
<li>Helps in assessing species adaptation to different environmental conditions.</li>
</ul></li>
<li><strong>Temperature (<code>temperature</code>)</strong>:
<ul>
<li>Represents the recorded water temperature (°C) where larvae develop.</li>
<li>Critical for studying species-specific thermal tolerances and climate change impacts.</li>
</ul></li>
<li><strong>Larval Duration (<code>duration</code>)</strong>:
<ul>
<li>Indicates the estimated number of days larvae remain in the larval stage.</li>
<li>Longer durations suggest extended planktonic phases, which can affect dispersal and survival.</li>
</ul></li>
</ul>
</section>
<section id="processing-6" class="level5" data-number="3.12.4.7.2">
<h5 data-number="3.12.4.7.2" class="anchored" data-anchor-id="processing-6"><span class="header-section-number">3.12.4.7.2</span> Processing</h5>
<p>The <code>larvdyn.csv</code> file was generated using the following processing steps:</p>
<ol type="1">
<li><strong>Selection of Relevant Fields</strong>:
<ul>
<li>Extracted ecosystem type, water temperature, and larval duration for each species.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>Ensured categorical values for <code>ecosystem</code> were standardized.</li>
<li>Retained missing values (<code>NA</code>) where temperature or duration was unreported.</li>
<li>Applied <code>dplyr::mutate()</code> to tag records with the FishBase table name.</li>
</ul></li>
<li><strong>Filtering &amp; Summarization</strong>:
<ul>
<li>Removed species without any recorded larval dynamics data.</li>
<li>Retained unique records per species to prevent duplication.</li>
</ul></li>
<li><strong>Exporting Cleaned Data</strong>:
<ul>
<li>The final dataset was written to <code>larvdyn.csv</code> for further analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-17" class="level5" data-number="3.12.4.7.3">
<h5 data-number="3.12.4.7.3" class="anchored" data-anchor-id="processed-data-structure-17"><span class="header-section-number">3.12.4.7.3</span> Processed Data Structure</h5>
<table class="table">
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>ecosystem</td>
<td>Ecosystem where larval development occurs</td>
</tr>
<tr class="odd">
<td>temperature</td>
<td>Water temperature (°C) at larval development</td>
</tr>
<tr class="even">
<td>duration</td>
<td>Duration of the larval stage (days)</td>
</tr>
<tr class="odd">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="reproduction-reproduc" class="level4" data-number="3.12.4.8">
<h4 data-number="3.12.4.8" class="anchored" data-anchor-id="reproduction-reproduc"><span class="header-section-number">3.12.4.8</span> Reproduction (<code>reproduc</code>)</h4>
<section id="explanation-of-data-content-7" class="level5" data-number="3.12.4.8.1">
<h5 data-number="3.12.4.8.1" class="anchored" data-anchor-id="explanation-of-data-content-7"><span class="header-section-number">3.12.4.8.1</span> Explanation of Data Content</h5>
<p>The <strong>Reproduction Table</strong> in FishBase <a href="https://fishbase.mnhn.fr/manual/English/fishbasethe_reproduction_table.htm">reference</a> provides information on the reproductive strategies of fish species, including their fertilization method, spawning patterns, and parental care.</p>
<ul>
<li><strong>Reproductive Mode (<code>repro_mode</code>)</strong>:
<ul>
<li>Describes how sexes are structured in a species.<br>
</li>
<li>Common values include <strong>dioecism</strong> (separate sexes), <strong>hermaphroditism</strong>, and <strong>unisex populations</strong>.</li>
</ul></li>
<li><strong>Fertilization Type (<code>fertilization</code>)</strong>:
<ul>
<li>Indicates whether fertilization occurs <strong>externally</strong> (in water) or <strong>internally</strong> (within the body).</li>
</ul></li>
<li><strong>Mating System (<code>mating_system</code>)</strong>:
<ul>
<li>Provides details on the mating strategy, though this field is often unreported.</li>
</ul></li>
<li><strong>Spawning Pattern (<code>spawning</code>)</strong>:
<ul>
<li>Describes the seasonal and geographic variation in spawning behavior.<br>
</li>
<li>Some species spawn throughout the year, while others have <strong>distinct reproductive seasons</strong>.</li>
</ul></li>
<li><strong>Batch Spawning (<code>batch_spawner</code>)</strong>:
<ul>
<li><strong>0</strong> = Does not spawn in batches.<br>
</li>
<li><strong>1</strong> = Produces eggs in multiple spawning events.</li>
</ul></li>
<li><strong>Reproductive Guild (<code>rep_guild1</code>, <code>rep_guild2</code>)</strong>:
<ul>
<li>Classifies species based on their spawning and parental care behaviors.<br>
</li>
<li><strong>Primary guild (<code>rep_guild1</code>)</strong>: Nonguarders, guarders, bearers.<br>
</li>
<li><strong>Secondary guild (<code>rep_guild2</code>)</strong>: More specific categorization, such as <strong>substratum egg scatterers</strong> or <strong>brood hiders</strong>.</li>
</ul></li>
<li><strong>Parental Care (<code>parental_care</code>)</strong>:
<ul>
<li>Indicates if a species provides care for its eggs or offspring.<br>
</li>
<li>Values include <strong>none</strong>, <strong>guarding</strong>, <strong>mouthbrooding</strong>, or <strong>live-bearing</strong> behaviors.</li>
</ul></li>
</ul>
</section>
<section id="processing-7" class="level5" data-number="3.12.4.8.2">
<h5 data-number="3.12.4.8.2" class="anchored" data-anchor-id="processing-7"><span class="header-section-number">3.12.4.8.2</span> Processing</h5>
<p>The <code>reproduc.csv</code> file was generated using the following processing steps:</p>
<ol type="1">
<li><strong>Selection of Relevant Fields</strong>:
<ul>
<li>Extracted key reproductive attributes such as reproductive mode, fertilization type, and parental care.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>Standardized categorical variables (<code>repro_mode</code>, <code>fertilization</code>, <code>rep_guild1</code>, <code>rep_guild2</code>, <code>parental_care</code>) to ensure consistency.<br>
</li>
<li>Ensured missing values (<code>NA</code>) remained where information was unreported.</li>
</ul></li>
<li><strong>Filtering &amp; Summarization</strong>:
<ul>
<li>Removed species without any recorded reproductive data.</li>
</ul></li>
<li><strong>Exporting Cleaned Data</strong>:
<ul>
<li>The final dataset was written to <code>reproduc.csv</code> for further analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-18" class="level5" data-number="3.12.4.8.3">
<h5 data-number="3.12.4.8.3" class="anchored" data-anchor-id="processed-data-structure-18"><span class="header-section-number">3.12.4.8.3</span> Processed Data Structure</h5>
<table class="table">
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>repro_mode</td>
<td>Reproductive mode (e.g., dioecism, hermaphroditism)</td>
</tr>
<tr class="odd">
<td>fertilization</td>
<td>Fertilization type (external or internal)</td>
</tr>
<tr class="even">
<td>mating_system</td>
<td>Mating strategy</td>
</tr>
<tr class="odd">
<td>spawning</td>
<td>Spawning pattern (e.g., seasonal, year-round)</td>
</tr>
<tr class="even">
<td>batch_spawner</td>
<td>Indicator of batch spawning (1 = Yes, 0 = No)</td>
</tr>
<tr class="odd">
<td>rep_guild1</td>
<td>Primary reproductive guild classification</td>
</tr>
<tr class="even">
<td>rep_guild2</td>
<td>Secondary reproductive guild classification</td>
</tr>
<tr class="odd">
<td>parental_care</td>
<td>Type of parental care (e.g., none, mouthbrooding)</td>
</tr>
<tr class="even">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="spawning-spawning" class="level4" data-number="3.12.4.9">
<h4 data-number="3.12.4.9" class="anchored" data-anchor-id="spawning-spawning"><span class="header-section-number">3.12.4.9</span> Spawning (<code>spawning</code>)</h4>
<section id="explanation-of-data-content-8" class="level5" data-number="3.12.4.9.1">
<h5 data-number="3.12.4.9.1" class="anchored" data-anchor-id="explanation-of-data-content-8"><span class="header-section-number">3.12.4.9.1</span> Explanation of Data Content</h5>
<p>The <strong>Spawning Table</strong> in FishBase <a href="https://www.fishbase.se/manual/fishbasethe_spawning_table.htm">reference</a> provides detailed information on the reproductive seasonality and environmental requirements of fish species.</p>
<ul>
<li><strong>Spawning Traits (<code>spawning_traits</code>)</strong>:
<ul>
<li><strong>Temperature Requirements (<code>temp_low</code>, <code>temp_high</code>)</strong>: Indicates the range of temperatures (°C) at which spawning occurs.<br>
</li>
<li><strong>Fecundity Estimates (<code>fecundity_min</code>, <code>fecundity_max</code>)</strong>: Represents the estimated range of eggs produced per spawning event.<br>
</li>
<li><strong>Spawning Cycles (<code>spawning_cycles</code>)</strong>: Number of spawning events per year.<br>
</li>
<li><strong>Spawning Habitats (<code>coastal</code>, <code>lacustrine</code>, <code>riverine</code>, <code>estuarine</code>)</strong>: Indicates the type of environment where spawning takes place.</li>
</ul></li>
<li><strong>Spawning Phenology (<code>spawning_phenology</code>)</strong>:
<ul>
<li><strong>Geographic Information (<code>country</code>, <code>longitude</code>, <code>latitude</code>)</strong>: Location details of where spawning was observed.<br>
</li>
<li><strong>Monthly Spawning Presence (<code>jan</code>–<code>dec</code>)</strong>: Binary indicators (<code>1</code> = active spawning, <code>0</code> = no activity) showing seasonal trends in spawning behavior.</li>
</ul></li>
</ul>
</section>
<section id="processing-8" class="level5" data-number="3.12.4.9.2">
<h5 data-number="3.12.4.9.2" class="anchored" data-anchor-id="processing-8"><span class="header-section-number">3.12.4.9.2</span> Processing</h5>
<p>The <code>spawning_traits.csv</code> and <code>spawning_phenology.csv</code> files were generated using the following processing steps:</p>
<ol type="1">
<li><strong>Selection of Relevant Fields</strong>:
<ul>
<li>Extracted environmental and reproductive attributes for <code>spawning_traits.csv</code>.<br>
</li>
<li>Retained geographic and temporal indicators for <code>spawning_phenology.csv</code>.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>Computed mean temperature and fecundity values per species using <code>dplyr::group_by()</code> and <code>summarize()</code>.<br>
</li>
<li>Converted missing values (<code>NA</code>) to <code>0</code> for monthly spawning indicators.<br>
</li>
<li>Standardized habitat types using <code>tidyr::pivot_wider()</code> to create binary presence/absence indicators.</li>
</ul></li>
<li><strong>Filtering &amp; Summarization</strong>:
<ul>
<li>Retained only species with at least one recorded spawning event.<br>
</li>
<li>Removed records where all monthly spawning indicators were <code>0</code>.</li>
</ul></li>
<li><strong>Exporting Cleaned Data</strong>:
<ul>
<li>The final datasets were written to <code>spawning_traits.csv</code> and <code>spawning_phenology.csv</code> for further analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-19" class="level5" data-number="3.12.4.9.3">
<h5 data-number="3.12.4.9.3" class="anchored" data-anchor-id="processed-data-structure-19"><span class="header-section-number">3.12.4.9.3</span> Processed Data Structure</h5>
<section id="spawning-traits-spawning_traits.csv" class="level6" data-number="3.12.4.9.3.1">
<h6 data-number="3.12.4.9.3.1" class="anchored" data-anchor-id="spawning-traits-spawning_traits.csv"><span class="header-section-number">3.12.4.9.3.1</span> Spawning Traits (<code>spawning_traits.csv</code>)</h6>
<table class="table">
<colgroup>
<col style="width: 23%">
<col style="width: 76%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>temp_low</td>
<td>Minimum temperature (°C) at which spawning occurs</td>
</tr>
<tr class="odd">
<td>temp_high</td>
<td>Maximum temperature (°C) at which spawning occurs</td>
</tr>
<tr class="even">
<td>fecundity_min</td>
<td>Minimum estimated fecundity</td>
</tr>
<tr class="odd">
<td>fecundity_max</td>
<td>Maximum estimated fecundity</td>
</tr>
<tr class="even">
<td>spawning_cycles</td>
<td>Number of spawning events per year</td>
</tr>
<tr class="odd">
<td>coastal</td>
<td>Presence in coastal spawning habitats (binary)</td>
</tr>
<tr class="even">
<td>lacustrine</td>
<td>Presence in lake spawning habitats (binary)</td>
</tr>
<tr class="odd">
<td>riverine</td>
<td>Presence in river spawning habitats (binary)</td>
</tr>
<tr class="even">
<td>estuarine</td>
<td>Presence in estuarine spawning habitats (binary)</td>
</tr>
<tr class="odd">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
<section id="spawning-phenology-spawning_phenology.csv" class="level6" data-number="3.12.4.9.3.2">
<h6 data-number="3.12.4.9.3.2" class="anchored" data-anchor-id="spawning-phenology-spawning_phenology.csv"><span class="header-section-number">3.12.4.9.3.2</span> Spawning Phenology (<code>spawning_phenology.csv</code>)</h6>
<table class="table">
<colgroup>
<col style="width: 15%">
<col style="width: 84%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>country</td>
<td>Country where spawning presence was observed</td>
</tr>
<tr class="odd">
<td>longitude</td>
<td>Longitude of the observation site</td>
</tr>
<tr class="even">
<td>latitude</td>
<td>Latitude of the observation site</td>
</tr>
<tr class="odd">
<td>jan-dec</td>
<td>Monthly indicators of spawning presence (1 = present, 0 = absent)</td>
</tr>
<tr class="even">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="species-species" class="level4" data-number="3.12.4.10">
<h4 data-number="3.12.4.10" class="anchored" data-anchor-id="species-species"><span class="header-section-number">3.12.4.10</span> Species (<code>species</code>)</h4>
<section id="explanation-of-data-content-9" class="level5" data-number="3.12.4.10.1">
<h5 data-number="3.12.4.10.1" class="anchored" data-anchor-id="explanation-of-data-content-9"><span class="header-section-number">3.12.4.10.1</span> Explanation of Data Content</h5>
<p>The <strong>Species Table</strong> in FishBase <a href="https://www.fishbase.se/manual/fishbasethe_species_table.htm">reference</a> provides fundamental taxonomic and biological information for fish species.</p>
<ul>
<li><strong>Taxonomic Information</strong>:
<ul>
<li><strong>Scientific Name (<code>scientific</code>)</strong>: The genus and species combination used for taxonomic classification.<br>
</li>
<li><strong>Preferred Image (<code>pic_preferred_name</code>)</strong>: The filename of the representative species image.</li>
</ul></li>
<li><strong>Habitat and Distribution</strong>:
<ul>
<li><strong>Freshwater (<code>fresh</code>)</strong>, <strong>Brackish (<code>brack</code>)</strong>, <strong>Saltwater (<code>saltwater</code>)</strong>: Binary indicators (<code>1</code> = present, <code>0</code> = absent) representing habitat preferences.<br>
</li>
<li><strong>Pelagic or Demersal (<code>demers_pelag</code>)</strong>: Classification indicating if the species is bottom-dwelling (demersal) or lives in the water column (pelagic).<br>
</li>
<li><strong>Air Breathing (<code>air_breathing</code>)</strong>: Indicates if the species is capable of air breathing.<br>
</li>
<li><strong>Anadromy and Catadromy (<code>ana_cat</code>)</strong>: Classifies migratory species that move between freshwater and marine environments.</li>
</ul></li>
<li><strong>Life History Traits</strong>:
<ul>
<li><strong>Longevity in the Wild (<code>longevity_wild</code>)</strong>: Maximum recorded lifespan (years).<br>
</li>
<li><strong>Maximum Length (<code>length</code>)</strong>: Maximum total length (cm) recorded for the species.<br>
</li>
<li><strong>Common Length (<code>common_length</code>)</strong>: The most frequently observed length (cm) for the species.<br>
</li>
<li><strong>Maximum Weight (<code>weight</code>)</strong>: Maximum recorded weight (grams) for the species.</li>
</ul></li>
<li><strong>Economic Importance</strong>:
<ul>
<li><strong>Importance (<code>importance</code>)</strong>: Classifies species as <strong>commercial, minor commercial, subsistence, or game fish</strong>.<br>
</li>
<li><strong>Game Fish (<code>game_fish</code>)</strong>: Binary indicator (<code>1</code> = game fish, <code>0</code> = not targeted for sport fishing).</li>
</ul></li>
</ul>
</section>
<section id="processing-9" class="level5" data-number="3.12.4.10.2">
<h5 data-number="3.12.4.10.2" class="anchored" data-anchor-id="processing-9"><span class="header-section-number">3.12.4.10.2</span> Processing</h5>
<p>The <code>species.csv</code> file was generated using the following processing steps:</p>
<ol type="1">
<li><strong>Selection of Relevant Fields</strong>:
<ul>
<li>Retained taxonomic, habitat, and biological attributes essential for ecological and fisheries research.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>Standardized categorical variables (<code>body_shape_i</code>, <code>demers_pelag</code>, <code>ana_cat</code>, <code>importance</code>) for consistency.<br>
</li>
<li>Converted <strong>missing values (<code>NA</code>)</strong> to <code>0</code> for binary habitat fields (<code>fresh</code>, <code>brack</code>, <code>saltwater</code>).</li>
</ul></li>
<li><strong>Filtering &amp; Summarization</strong>:
<ul>
<li>Removed species lacking taxonomic or ecological data to maintain dataset integrity.<br>
</li>
<li>Mapped species to FishBase images where available.</li>
</ul></li>
<li><strong>Exporting Cleaned Data</strong>:
<ul>
<li>The final dataset was written to <code>species.csv</code> for further analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-20" class="level5" data-number="3.12.4.10.3">
<h5 data-number="3.12.4.10.3" class="anchored" data-anchor-id="processed-data-structure-20"><span class="header-section-number">3.12.4.10.3</span> Processed Data Structure</h5>
<table class="table">
<colgroup>
<col style="width: 30%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>scientific</td>
<td>Genus and species combination</td>
</tr>
<tr class="odd">
<td>pic_preferred_name</td>
<td>Filename of the representative species image</td>
</tr>
<tr class="even">
<td>body_shape_i</td>
<td>Body shape classification (e.g., fusiform)</td>
</tr>
<tr class="odd">
<td>fresh</td>
<td>Presence in freshwater habitats (binary)</td>
</tr>
<tr class="even">
<td>brack</td>
<td>Presence in brackish water habitats (binary)</td>
</tr>
<tr class="odd">
<td>saltwater</td>
<td>Presence in saltwater habitats (binary)</td>
</tr>
<tr class="even">
<td>demers_pelag</td>
<td>Classification as demersal or pelagic</td>
</tr>
<tr class="odd">
<td>air_breathing</td>
<td>Indicator of air-breathing ability (binary)</td>
</tr>
<tr class="even">
<td>ana_cat</td>
<td>Migration category (e.g., anadromous, catadromous)</td>
</tr>
<tr class="odd">
<td>longevity_wild</td>
<td>Maximum recorded lifespan (years)</td>
</tr>
<tr class="even">
<td>length</td>
<td>Maximum recorded length (cm)</td>
</tr>
<tr class="odd">
<td>common_length</td>
<td>Most frequently observed length (cm)</td>
</tr>
<tr class="even">
<td>weight</td>
<td>Maximum recorded weight (grams)</td>
</tr>
<tr class="odd">
<td>importance</td>
<td>Economic importance (e.g., commercial, game fish)</td>
</tr>
<tr class="even">
<td>game_fish</td>
<td>Indicator of game fish status (binary)</td>
</tr>
<tr class="odd">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="swimming-swimming" class="level4" data-number="3.12.4.11">
<h4 data-number="3.12.4.11" class="anchored" data-anchor-id="swimming-swimming"><span class="header-section-number">3.12.4.11</span> Swimming (<code>swimming</code>)</h4>
<section id="explanation-of-data-content-10" class="level5" data-number="3.12.4.11.1">
<h5 data-number="3.12.4.11.1" class="anchored" data-anchor-id="explanation-of-data-content-10"><span class="header-section-number">3.12.4.11.1</span> Explanation of Data Content</h5>
<p>The <strong>Swimming Table</strong> in FishBase <a href="https://www.fishbase.se/manual/fishbasethe_swimming_and_speed_tables.htm">reference</a> provides information on the swimming strategies of fish species.</p>
<ul>
<li><strong>Swimming Type (<code>adult_type</code>)</strong>:
<ul>
<li>Describes the primary movement mechanism used by adult fish.<br>
</li>
<li>Common values include:
<ul>
<li><strong>Movements of body and/or caudal fin</strong> (e.g., undulatory propulsion).<br>
</li>
<li><strong>Movements of median and/or paired fins</strong> (e.g., fin propulsion without significant body movement).</li>
</ul></li>
</ul></li>
<li><strong>Swimming Mode (<code>adult_mode</code>)</strong>:
<ul>
<li>Classifies species based on their swimming kinematics.<br>
</li>
<li>Common categories:
<ul>
<li><strong>Anguilliform</strong> (e.g., eels—body waves propagate the entire length).<br>
</li>
<li><strong>Carangiform</strong> (e.g., jacks—flexion in the posterior half of the body).<br>
</li>
<li><strong>Subcarangiform</strong> (e.g., salmon—less body flexion than carangiform).<br>
</li>
<li><strong>Thunniform</strong> (e.g., tuna—efficient, high-speed swimming with minimal body movement).<br>
</li>
<li><strong>Labriform</strong> (e.g., wrasses—use of pectoral fins for propulsion).</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="processing-10" class="level5" data-number="3.12.4.11.2">
<h5 data-number="3.12.4.11.2" class="anchored" data-anchor-id="processing-10"><span class="header-section-number">3.12.4.11.2</span> Processing</h5>
<p>The <code>swimming.csv</code> file was generated using the following processing steps:</p>
<ol type="1">
<li><strong>Selection of Relevant Fields</strong>:
<ul>
<li>Extracted adult swimming type and mode to retain core locomotive attributes.</li>
</ul></li>
<li><strong>Data Transformation</strong>:
<ul>
<li>Standardized categorical variables (<code>adult_type</code>, <code>adult_mode</code>) for consistency.<br>
</li>
<li>Ensured missing values (<code>NA</code>) remained where data was unreported.</li>
</ul></li>
<li><strong>Filtering &amp; Summarization</strong>:
<ul>
<li>Removed species without recorded swimming data.</li>
</ul></li>
<li><strong>Exporting Cleaned Data</strong>:
<ul>
<li>The final dataset was written to <code>swimming.csv</code> for further analyses.</li>
</ul></li>
</ol>
</section>
<section id="processed-data-structure-21" class="level5" data-number="3.12.4.11.3">
<h5 data-number="3.12.4.11.3" class="anchored" data-anchor-id="processed-data-structure-21"><span class="header-section-number">3.12.4.11.3</span> Processed Data Structure</h5>
<table class="table">
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>species_id</td>
<td>Unique species identifier</td>
</tr>
<tr class="even">
<td>adult_type</td>
<td>Primary movement mechanism</td>
</tr>
<tr class="odd">
<td>adult_mode</td>
<td>Swimming kinematics classification</td>
</tr>
<tr class="even">
<td>fb_table</td>
<td>FishBase source table indicator</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>
<section id="references" class="level2" data-number="3.13">
<h2 data-number="3.13" class="anchored" data-anchor-id="references"><span class="header-section-number">3.13</span> References</h2>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="1" data-line-spacing="5" role="list">
<div id="ref-benoit2023" class="csl-entry" role="listitem">
Benoit, D., Zielinski, D., and Swanson, R. et al. (2023). FishPass sortable attribute database: Phenological, morphological, physiological, and behavioural characteristics related to passage and movement of great lakes fishes [dataset]. Available at: <a href="https://doi.org/10.5061/dryad.fqz612jwj">https://doi.org/10.5061/dryad.fqz612jwj</a>.
</div>
<div id="ref-boettiger2012" class="csl-entry" role="listitem">
Boettiger, C., Temple Lang, D., and Wainwright, P. (2012). Rfishbase: Exploring, manipulating and visualizing <span>FishBase</span> data from r. <em>Journal of Fish Biology</em>. Available at: <a href="https://doi.org/10.1111/j.1095-8649.2012.03464.x">https://doi.org/10.1111/j.1095-8649.2012.03464.x</a>.
</div>
<div id="ref-nrcan2022b" class="csl-entry" role="listitem">
Canada, N. R. (2022a). Atlas of canada national scale data 1:1,000,000 - rivers. Natural Resources Canada Available at: <a href="https://open.canada.ca/data/en/dataset/87bb794c-eabf-5eea-bdb3-61d0338d9594">https://open.canada.ca/data/en/dataset/87bb794c-eabf-5eea-bdb3-61d0338d9594</a>.
</div>
<div id="ref-nrcan2022a" class="csl-entry" role="listitem">
Canada, N. R. (2022b). Atlas of canada national scale data 1:1,000,000 - waterbodies. Natural Resources Canada Available at: <a href="https://open.canada.ca/data/en/dataset/e9931fc7-034c-52ad-91c5-6c64d4ba0065">https://open.canada.ca/data/en/dataset/e9931fc7-034c-52ad-91c5-6c64d4ba0065</a>.
</div>
<div id="ref-nrcan2022" class="csl-entry" role="listitem">
Canada, N. R. (2022c). National hydro network (NHN) - GeoBase series. Natural Resources Canada Available at: <a href="https://open.canada.ca/data/en/dataset/a4b190fe-e090-4e6d-881e-b87956c07977">https://open.canada.ca/data/en/dataset/a4b190fe-e090-4e6d-881e-b87956c07977</a>.
</div>
<div id="ref-dahlke2020" class="csl-entry" role="listitem">
Dahlke, F. T., Wohlrab, S., Butzin, M., and P"ortner, H.-O. (2020a). Fish survival at the upper thermal limits: Effects of size-dependent oxygen supply and climate change. <em>Science</em> 369, 65–70. doi:<a href="https://doi.org/10.1126/science.aaz3658">10.1126/science.aaz3658</a>.
</div>
<div id="ref-dahlke2020dataset" class="csl-entry" role="listitem">
Dahlke, F., Wohlrab, S., Butzin, M., and P"ortner, H.-O. (2020b). Experimental data compilation, thermal tolerance and thermal responsiveness of fish species and life stages [dataset]. doi:<a href="https://doi.org/10.1594/PANGAEA.917796">10.1594/PANGAEA.917796</a>.
</div>
<div id="ref-dean2021" class="csl-entry" role="listitem">
Dean, E. M., Cooper, A. R., Wang, L., Daniel, W. M., David, S., Ernzen, C., et al. (2021). The north american freshwater migratory fish database (NAFMFD): Characterizing the migratory life histories of freshwater fishes of canada, the united states, and mexico. U.S. Geological Survey Available at: <a href="https://doi.org/10.5066/P9WDLLP0">https://doi.org/10.5066/P9WDLLP0</a>.
</div>
<div id="ref-dean2022" class="csl-entry" role="listitem">
Dean, E. M., Cooper, A. R., Wang, L., Daniel, W., David, S., Ernzen, C., et al. (2022). The north american freshwater migratory fish database (NAFMFD): Characterizing the migratory life histories of freshwater fishes of canada, the united states and mexico. <em>Journal of Biogeography, Early View</em>. Available at: <a href="https://doi.org/10.1111/jbi.14367">https://doi.org/10.1111/jbi.14367</a>.
</div>
<div id="ref-eakins2024" class="csl-entry" role="listitem">
Eakins, R. J. (2024). Ontario freshwater fishes life history database. <span>Ontario Freshwater Fishes</span> Available at: <a href="https://www.ontariofishes.ca/home.htm">https://www.ontariofishes.ca/home.htm</a>.
</div>
<div id="ref-fishbase2024" class="csl-entry" role="listitem">
Froese, R. and Pauly, D. (2024). FishBase freshwater species checklist. <span>FishBase</span> Available at: <a href="https://www.fishbase.se/country/CountryChecklist.php?what=list&amp;trpp=50&amp;c_code=124&amp;csub_code=&amp;cpresence=present&amp;sortby=alpha2&amp;vhabitat=fresh">https://www.fishbase.se/country/CountryChecklist.php?what=list&amp;trpp=50&amp;c_code=124&amp;csub_code=&amp;cpresence=present&amp;sortby=alpha2&amp;vhabitat=fresh</a>.
</div>
<div id="ref-froese2024" class="csl-entry" role="listitem">
Froese, R., and Pauly, D. (Editors). (2024). FishBase. Available at: <a href="https://www.fishbase.org">https://www.fishbase.org</a>.
</div>
<div id="ref-gadm2023" class="csl-entry" role="listitem">
Global Administrative Areas, G. (Database of (2023). GADM database of global administrative areas, version 4.1. GADM Available at: <a href="https://gadm.org">https://gadm.org</a>.
</div>
<div id="ref-gbif2025" class="csl-entry" role="listitem">
Global Biodiversity Information Facility (2025). GBIF occurrence download https://doi.org/10.15468/dl.fxqrjh accessed from r via rgbif (https://github.com/ropensci/rgbif) on 2025-01-23. <span>GBIF Secretariat</span>.
</div>
<div id="ref-roberge2002" class="csl-entry" role="listitem">
Roberge, M., Hume, J. M. B., Minns, C. K., and Slaney, T. (2002). Life history characteristics of freshwater fishes occurring in british columbia and the yukon, with major emphasis on stream habitat characteristics. Fisheries; Oceans Canada.
</div>
<div id="ref-figshare2025" class="csl-entry" role="listitem">
Tedesco, P. A. et al. (2017a). A global database on freshwater fish species occurrences in drainage basins. Figshare Available at: <a href="https://figshare.com/collections/A_global_database_on_freshwater_fish_species_occurrences_in_drainage_basins/3739145">https://figshare.com/collections/A_global_database_on_freshwater_fish_species_occurrences_in_drainage_basins/3739145</a>.
</div>
<div id="ref-tedesco2017" class="csl-entry" role="listitem">
Tedesco, P. A., Beauchard, O., Bigorne, R., et al. (2017b). A global database on freshwater fish species occurrences in drainage basins. <em>Scientific Data</em> 4, 170141. doi:<a href="https://doi.org/10.1038/sdata.2017.141">10.1038/sdata.2017.141</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./1_research_compendium.html" class="pagination-link" aria-label="Research compendium">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Research compendium</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./3_integration.html" class="pagination-link" aria-label="Data integration">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data integration</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>