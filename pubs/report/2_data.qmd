---
title: "Data Sources Overview"
---

# Data Sources Overview

## Canadian Freshwater Fish Species {#sec-freshwater-fish}

### Source and Description

The dataset, titled **FishBase Freshwater Species Checklist**, was harvested from [FishBase](https://www.fishbase.se/) [@fishbase2024]. This comprehensive dataset provides information on freshwater fish species found across Canada. It includes essential taxonomic and ecological details, such as species name, vernacular name, family, and order. The source data consists of HTML tables retrieved through web scraping and transformed into a structured format for analysis.

### Processing Steps

The harvested raw data was processed using the `prc_freshwater_fish_canada` script, which included the following steps:

1. **Data Cleaning**: Column names were standardized using the `janitor::clean_names` function.
2. **Field Selection**: The column `name_in_country` was removed as it was not relevant for this analysis.
3. **Column Renaming**: The `fish_base_name` column was renamed to `vernacular` to provide clarity.
4. **Data Export**: The processed data was saved as a CSV file named `freshwater_fish_species_canada.csv`.

### Processed Data Structure

The processed dataset retains the following structure:

```{r}
#| label: tbl-freshwater-fish
#| tbl-cap: "Structure of the processed freshwater fish species dataset for Canada"
data.frame(
  Column_Name = c("species", "vernacular", "order", "family", "occurrence"),
  Description = c(
    "Scientific name of the fish species.",
    "Common name of the fish species.",
    "Taxonomic order to which the species belongs.",
    "Taxonomic family to which the species belongs.",
    "Occurrence status of the species in Canada (e.g., native)."
  )
) |>
  knitr::kable()
```

## Canadian Hydrological Features {#sec-canadian-hydrology}

### Source and Description

The dataset, titled **Atlas of Canada National Scale Data 1:1,000,000 - Waterbodies & Rivers**, was harvested from [Natural Resources Canada](https://open.canada.ca/data/en/dataset/e9931fc7-034c-52ad-91c5-6c64d4ba0065) [@nrcan2022a; @nrcan2022b]. This comprehensive GIS dataset includes spatial and tabular data representing Canada's hydrological features. It consists of waterbodies and river datasets compiled for large-scale mapping at a 1:1,000,000 scale. 

### Processing Steps

The harvested raw data was processed using the `prc_atlas_of_canada_hydrology` script. The following steps were performed:

1. **Unzipping**: The compressed GDB files were extracted to a temporary directory for processing.
2. **Waterbody Processing**:
   - Loaded the "AC_1M_Waterbodies" layer using the `sf::st_read` function.
   - Calculated the area and perimeter of each waterbody using `sf::st_area` and `lwgeom::st_perimeter_lwgeom`.
   - Generated a unique `waterbody_id` for each feature.
   - Retained relevant columns: `waterbody_id`, `name`, `name_fr`, `area`, and `perimeter`.
   - Exported the processed data as `waterbodies.gpkg`.
3. **River Processing**:
   - Loaded the "AC_1M_Rivers_dense" layer using the `sf::st_read` function.
   - Calculated the length of each river feature using `sf::st_length`.
   - Generated a unique `river_id` for each feature.
   - Retained relevant columns: `river_id`, `name`, `name_fr`, and `length`.
   - Exported the processed data as `rivers.gpkg`.
4. **Cleanup**: Temporary files created during processing were deleted.

### Processed Data Structure

The structure of the processed waterbody dataset is as follows:

```{r}
#| label: tbl-waterbodies
#| tbl-cap: "Structure of the processed waterbody dataset for Canada"
data.frame(
  Column_Name = c("waterbody_id", "name", "name_fr", "area", "perimeter"),
  Description = c(
    "Unique identifier for each waterbody feature.",
    "Name of the waterbody in English.",
    "Name of the waterbody in French.",
    "Surface area of the waterbody in square kilometers.",
    "Perimeter of the waterbody in kilometers."
  )
) |>
  knitr::kable()
```

The structure of the processed river dataset is as follows:

```{r}
#| label: tbl-rivers
#| tbl-cap: "Structure of the processed river dataset for Canada"
data.frame(
  Column_Name = c("river_id", "name", "name_fr", "length"),
  Description = c(
    "Unique identifier for each river feature.",
    "Name of the river in English.",
    "Name of the river in French.",
    "Length of the river in kilometers."
  )
) |>
  knitr::kable()
```

## References
